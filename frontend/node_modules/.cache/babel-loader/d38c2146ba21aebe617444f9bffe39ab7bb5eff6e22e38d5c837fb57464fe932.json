{"ast":null,"code":"import \"core-js/modules/es.function.name.js\";\nimport { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, vModelSelect as _vModelSelect, withDirectives as _withDirectives, vModelText as _vModelText, openBlock as _openBlock, createElementBlock as _createElementBlock, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString } from \"vue\";\nvar _hoisted_1 = {\n  \"class\": \"container mx-auto px-4 py-8\"\n};\nvar _hoisted_2 = {\n  \"class\": \"mb-6 flex flex-wrap items-center gap-4\"\n};\nvar _hoisted_3 = {\n  \"class\": \"flex items-center\"\n};\nvar _hoisted_4 = {\n  key: 0,\n  \"class\": \"flex items-center\"\n};\nvar _hoisted_5 = {\n  key: 1,\n  \"class\": \"flex items-center\"\n};\nvar _hoisted_6 = [\"value\"];\nvar _hoisted_7 = {\n  key: 0,\n  \"class\": \"text-center py-8\"\n};\nvar _hoisted_8 = {\n  key: 1,\n  \"class\": \"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-6\",\n  role: \"alert\"\n};\nvar _hoisted_9 = {\n  key: 2\n};\nvar _hoisted_10 = {\n  \"class\": \"text-2xl font-semibold text-gray-800 mb-4\"\n};\nvar _hoisted_11 = {\n  \"class\": \"mb-8\"\n};\nvar _hoisted_12 = {\n  \"class\": \"overflow-x-auto\"\n};\nvar _hoisted_13 = {\n  \"class\": \"min-w-full bg-white border border-gray-300\"\n};\nvar _hoisted_14 = {\n  \"class\": \"py-2 px-4 border-b\"\n};\nvar _hoisted_15 = {\n  \"class\": \"py-2 px-4 border-b\"\n};\nvar _hoisted_16 = {\n  \"class\": \"py-2 px-4 border-b text-right\"\n};\nvar _hoisted_17 = {\n  \"class\": \"py-2 px-4 border-b text-right\"\n};\nvar _hoisted_18 = {\n  \"class\": \"py-2 px-4 border-b text-right\"\n};\nvar _hoisted_19 = {\n  \"class\": \"mb-8\"\n};\nvar _hoisted_20 = {\n  key: 0,\n  \"class\": \"bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-4\"\n};\nvar _hoisted_21 = {\n  \"class\": \"list-disc list-inside\"\n};\nvar _hoisted_22 = {\n  key: 1,\n  \"class\": \"text-green-600\"\n};\nvar _hoisted_23 = {\n  \"class\": \"mb-8\"\n};\nvar _hoisted_24 = {\n  key: 0,\n  \"class\": \"bg-orange-100 border-l-4 border-orange-500 text-orange-700 p-4\"\n};\nvar _hoisted_25 = {\n  \"class\": \"list-disc list-inside\"\n};\nvar _hoisted_26 = {\n  key: 1,\n  \"class\": \"text-green-600\"\n};\nvar _hoisted_27 = {\n  \"class\": \"mt-6\"\n};\nvar _hoisted_28 = [\"disabled\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[15] || (_cache[15] = _createElementVNode(\"h1\", {\n    \"class\": \"text-3xl font-bold text-gray-800 mb-6\"\n  }, \"Inventory Reports\", -1 /* HOISTED */)), _createCommentVNode(\" Report Type and Date Selection \"), _createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_cache[4] || (_cache[4] = _createElementVNode(\"label\", {\n    \"for\": \"reportType\",\n    \"class\": \"mr-2 text-gray-700\"\n  }, \"Report Type:\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"select\", {\n    id: \"reportType\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = function ($event) {\n      return $setup.reportType = $event;\n    }),\n    onChange: $setup.fetchReport,\n    \"class\": \"border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n  }, _cache[3] || (_cache[3] = [_createElementVNode(\"option\", {\n    value: \"monthly\"\n  }, \"Monthly\", -1 /* HOISTED */), _createElementVNode(\"option\", {\n    value: \"yearly\"\n  }, \"Yearly\", -1 /* HOISTED */)]), 544 /* NEED_HYDRATION, NEED_PATCH */), [[_vModelSelect, $setup.reportType]])]), $setup.reportType === 'monthly' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [_cache[5] || (_cache[5] = _createElementVNode(\"label\", {\n    \"for\": \"monthYear\",\n    \"class\": \"mr-2 text-gray-700\"\n  }, \"Select Month:\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    id: \"monthYear\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = function ($event) {\n      return $setup.selectedMonth = $event;\n    }),\n    type: \"month\",\n    onChange: $setup.fetchReport,\n    \"class\": \"border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n  }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [[_vModelText, $setup.selectedMonth]])])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [_cache[6] || (_cache[6] = _createElementVNode(\"label\", {\n    \"for\": \"year\",\n    \"class\": \"mr-2 text-gray-700\"\n  }, \"Select Year:\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"select\", {\n    id: \"year\",\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = function ($event) {\n      return $setup.selectedYear = $event;\n    }),\n    onChange: $setup.fetchReport,\n    \"class\": \"border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n  }, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.availableYears, function (year) {\n    return _openBlock(), _createElementBlock(\"option\", {\n      key: year,\n      value: year\n    }, _toDisplayString(year), 9 /* TEXT, PROPS */, _hoisted_6);\n  }), 128 /* KEYED_FRAGMENT */))], 544 /* NEED_HYDRATION, NEED_PATCH */), [[_vModelSelect, $setup.selectedYear]])]))]), _createCommentVNode(\" Loading State \"), $setup.isLoading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, _cache[7] || (_cache[7] = [_createElementVNode(\"div\", {\n    \"class\": \"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900 mx-auto\"\n  }, null, -1 /* HOISTED */), _createElementVNode(\"p\", {\n    \"class\": \"mt-4 text-gray-600\"\n  }, \"Loading report data...\", -1 /* HOISTED */)]))) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" Error Message \"), $setup.error ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, [_cache[8] || (_cache[8] = _createElementVNode(\"p\", {\n    \"class\": \"font-bold\"\n  }, \"Error\", -1 /* HOISTED */)), _createElementVNode(\"p\", null, _toDisplayString($setup.error), 1 /* TEXT */)])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" Report Content \"), !$setup.isLoading && !$setup.error ? (_openBlock(), _createElementBlock(\"div\", _hoisted_9, [_createElementVNode(\"h2\", _hoisted_10, \" Inventory Report for \" + _toDisplayString($setup.reportTitle), 1 /* TEXT */), _createCommentVNode(\" Inventory Items Table \"), _createElementVNode(\"div\", _hoisted_11, [_cache[10] || (_cache[10] = _createElementVNode(\"h3\", {\n    \"class\": \"text-xl font-semibold text-gray-700 mb-3\"\n  }, \"Inventory Items\", -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_12, [_createElementVNode(\"table\", _hoisted_13, [_cache[9] || (_cache[9] = _createElementVNode(\"thead\", null, [_createElementVNode(\"tr\", {\n    \"class\": \"bg-gray-100\"\n  }, [_createElementVNode(\"th\", {\n    \"class\": \"py-2 px-4 border-b text-left\"\n  }, \"Item Name\"), _createElementVNode(\"th\", {\n    \"class\": \"py-2 px-4 border-b text-left\"\n  }, \"Batch Name\"), _createElementVNode(\"th\", {\n    \"class\": \"py-2 px-4 border-b text-right\"\n  }, \"Batch Quantity\"), _createElementVNode(\"th\", {\n    \"class\": \"py-2 px-4 border-b text-right\"\n  }, \"Total Disbursed\"), _createElementVNode(\"th\", {\n    \"class\": \"py-2 px-4 border-b text-right\"\n  }, \"Total Remaining\")])], -1 /* HOISTED */)), _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.reportData, function (item, index) {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: index,\n      \"class\": \"hover:bg-gray-50\"\n    }, [_createElementVNode(\"td\", _hoisted_14, _toDisplayString(item.itemName), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_15, _toDisplayString(item.batchName), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_16, _toDisplayString(item.batchQuantity), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_17, _toDisplayString(item.totalDisbursed), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_18, _toDisplayString(item.totalRemaining), 1 /* TEXT */)]);\n  }), 128 /* KEYED_FRAGMENT */))])])])]), _createCommentVNode(\" Low Stock Items \"), _createElementVNode(\"div\", _hoisted_19, [_cache[12] || (_cache[12] = _createElementVNode(\"h3\", {\n    \"class\": \"text-xl font-semibold text-gray-700 mb-3\"\n  }, \"Low Stock Items\", -1 /* HOISTED */)), $setup.lowStockItems.length > 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_20, [_cache[11] || (_cache[11] = _createElementVNode(\"p\", {\n    \"class\": \"font-bold\"\n  }, \"Warning\", -1 /* HOISTED */)), _createElementVNode(\"ul\", _hoisted_21, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.lowStockItems, function (item) {\n    return _openBlock(), _createElementBlock(\"li\", {\n      key: item.id\n    }, _toDisplayString(item.name) + \" - Current stock: \" + _toDisplayString(item.quantity_in_stock) + \" (Minimum: \" + _toDisplayString(item.min_stock_level) + \") \", 1 /* TEXT */);\n  }), 128 /* KEYED_FRAGMENT */))])])) : (_openBlock(), _createElementBlock(\"p\", _hoisted_22, \"No items are currently low in stock.\"))]), _createCommentVNode(\" Expiring Batches \"), _createElementVNode(\"div\", _hoisted_23, [_cache[14] || (_cache[14] = _createElementVNode(\"h3\", {\n    \"class\": \"text-xl font-semibold text-gray-700 mb-3\"\n  }, \"Expiring Batches (Next 30 Days)\", -1 /* HOISTED */)), $setup.expiringBatches.length > 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_24, [_cache[13] || (_cache[13] = _createElementVNode(\"p\", {\n    \"class\": \"font-bold\"\n  }, \"Attention\", -1 /* HOISTED */)), _createElementVNode(\"ul\", _hoisted_25, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.expiringBatches, function (batch) {\n    return _openBlock(), _createElementBlock(\"li\", {\n      key: batch.id\n    }, _toDisplayString(batch.InventoryItem.name) + \" (Batch: \" + _toDisplayString(batch.batch_number) + \") - Expires on \" + _toDisplayString($setup.formatDate(batch.expiry_date)), 1 /* TEXT */);\n  }), 128 /* KEYED_FRAGMENT */))])])) : (_openBlock(), _createElementBlock(\"p\", _hoisted_26, \"No batches are expiring in the next 30 days.\"))]), _createCommentVNode(\" Download PDF Button \"), _createElementVNode(\"div\", _hoisted_27, [_createElementVNode(\"button\", {\n    onClick: $setup.downloadPDF,\n    \"class\": \"bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline\",\n    disabled: $setup.isGeneratingPDF\n  }, _toDisplayString($setup.isGeneratingPDF ? 'Generating PDF...' : 'Download PDF Report'), 9 /* TEXT, PROPS */, _hoisted_28)])])) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"names":["key","role","_createElementBlock","_hoisted_1","_createElementVNode","_createCommentVNode","_hoisted_2","_hoisted_3","id","_cache","$event","$setup","reportType","onChange","fetchReport","value","_hoisted_4","selectedMonth","type","_hoisted_5","selectedYear","_Fragment","_renderList","availableYears","year","_hoisted_6","isLoading","_hoisted_7","error","_hoisted_8","_toDisplayString","_hoisted_9","_hoisted_10","reportTitle","_hoisted_11","_hoisted_12","_hoisted_13","reportData","item","index","_hoisted_14","itemName","_hoisted_15","batchName","_hoisted_16","batchQuantity","_hoisted_17","totalDisbursed","_hoisted_18","totalRemaining","_hoisted_19","lowStockItems","length","_hoisted_20","_hoisted_21","name","quantity_in_stock","min_stock_level","_hoisted_22","_hoisted_23","expiringBatches","_hoisted_24","_hoisted_25","batch","InventoryItem","batch_number","formatDate","expiry_date","_hoisted_26","_hoisted_27","onClick","downloadPDF","disabled","isGeneratingPDF","_hoisted_28"],"sources":["C:\\Inventory-Clinic-MCC\\frontend\\src\\views\\Reports.vue"],"sourcesContent":["<template>\r\n  <div class=\"container mx-auto px-4 py-8\">\r\n    <h1 class=\"text-3xl font-bold text-gray-800 mb-6\">Inventory Reports</h1>\r\n\r\n    <!-- Report Type and Date Selection -->\r\n    <div class=\"mb-6 flex flex-wrap items-center gap-4\">\r\n      <div class=\"flex items-center\">\r\n        <label for=\"reportType\" class=\"mr-2 text-gray-700\">Report Type:</label>\r\n        <select\r\n          id=\"reportType\"\r\n          v-model=\"reportType\"\r\n          @change=\"fetchReport\"\r\n          class=\"border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n        >\r\n          <option value=\"monthly\">Monthly</option>\r\n          <option value=\"yearly\">Yearly</option>\r\n        </select>\r\n      </div>\r\n\r\n      <div v-if=\"reportType === 'monthly'\" class=\"flex items-center\">\r\n        <label for=\"monthYear\" class=\"mr-2 text-gray-700\">Select Month:</label>\r\n        <input\r\n          id=\"monthYear\"\r\n          v-model=\"selectedMonth\"\r\n          type=\"month\"\r\n          @change=\"fetchReport\"\r\n          class=\"border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n        />\r\n      </div>\r\n\r\n      <div v-else class=\"flex items-center\">\r\n        <label for=\"year\" class=\"mr-2 text-gray-700\">Select Year:</label>\r\n        <select\r\n          id=\"year\"\r\n          v-model=\"selectedYear\"\r\n          @change=\"fetchReport\"\r\n          class=\"border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n        >\r\n          <option v-for=\"year in availableYears\" :key=\"year\" :value=\"year\">\r\n            {{ year }}\r\n          </option>\r\n        </select>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Loading State -->\r\n    <div v-if=\"isLoading\" class=\"text-center py-8\">\r\n      <div class=\"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900 mx-auto\"></div>\r\n      <p class=\"mt-4 text-gray-600\">Loading report data...</p>\r\n    </div>\r\n\r\n    <!-- Error Message -->\r\n    <div v-if=\"error\" class=\"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-6\" role=\"alert\">\r\n      <p class=\"font-bold\">Error</p>\r\n      <p>{{ error }}</p>\r\n    </div>\r\n\r\n    <!-- Report Content -->\r\n    <div v-if=\"!isLoading && !error\">\r\n      <h2 class=\"text-2xl font-semibold text-gray-800 mb-4\">\r\n        Inventory Report for {{ reportTitle }}\r\n      </h2>\r\n\r\n      <!-- Inventory Items Table -->\r\n      <div class=\"mb-8\">\r\n        <h3 class=\"text-xl font-semibold text-gray-700 mb-3\">Inventory Items</h3>\r\n        <div class=\"overflow-x-auto\">\r\n          <table class=\"min-w-full bg-white border border-gray-300\">\r\n            <thead>\r\n              <tr class=\"bg-gray-100\">\r\n                <th class=\"py-2 px-4 border-b text-left\">Item Name</th>\r\n                <th class=\"py-2 px-4 border-b text-left\">Batch Name</th>\r\n                <th class=\"py-2 px-4 border-b text-right\">Batch Quantity</th>\r\n                <th class=\"py-2 px-4 border-b text-right\">Total Disbursed</th>\r\n                <th class=\"py-2 px-4 border-b text-right\">Total Remaining</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              <tr v-for=\"(item, index) in reportData\" :key=\"index\" class=\"hover:bg-gray-50\">\r\n                <td class=\"py-2 px-4 border-b\">{{ item.itemName }}</td>\r\n                <td class=\"py-2 px-4 border-b\">{{ item.batchName }}</td>\r\n                <td class=\"py-2 px-4 border-b text-right\">{{ item.batchQuantity }}</td>\r\n                <td class=\"py-2 px-4 border-b text-right\">{{ item.totalDisbursed }}</td>\r\n                <td class=\"py-2 px-4 border-b text-right\">{{ item.totalRemaining }}</td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Low Stock Items -->\r\n      <div class=\"mb-8\">\r\n        <h3 class=\"text-xl font-semibold text-gray-700 mb-3\">Low Stock Items</h3>\r\n        <div v-if=\"lowStockItems.length > 0\" class=\"bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-4\">\r\n          <p class=\"font-bold\">Warning</p>\r\n          <ul class=\"list-disc list-inside\">\r\n            <li v-for=\"item in lowStockItems\" :key=\"item.id\">\r\n              {{ item.name }} - Current stock: {{ item.quantity_in_stock }} (Minimum: {{ item.min_stock_level }})\r\n            </li>\r\n          </ul>\r\n        </div>\r\n        <p v-else class=\"text-green-600\">No items are currently low in stock.</p>\r\n      </div>\r\n\r\n      <!-- Expiring Batches -->\r\n      <div class=\"mb-8\">\r\n        <h3 class=\"text-xl font-semibold text-gray-700 mb-3\">Expiring Batches (Next 30 Days)</h3>\r\n        <div v-if=\"expiringBatches.length > 0\" class=\"bg-orange-100 border-l-4 border-orange-500 text-orange-700 p-4\">\r\n          <p class=\"font-bold\">Attention</p>\r\n          <ul class=\"list-disc list-inside\">\r\n            <li v-for=\"batch in expiringBatches\" :key=\"batch.id\">\r\n              {{ batch.InventoryItem.name }} (Batch: {{ batch.batch_number }}) - Expires on {{ formatDate(batch.expiry_date) }}\r\n            </li>\r\n          </ul>\r\n        </div>\r\n        <p v-else class=\"text-green-600\">No batches are expiring in the next 30 days.</p>\r\n      </div>\r\n\r\n      <!-- Download PDF Button -->\r\n      <div class=\"mt-6\">\r\n        <button\r\n          @click=\"downloadPDF\"\r\n          class=\"bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline\"\r\n          :disabled=\"isGeneratingPDF\"\r\n        >\r\n          {{ isGeneratingPDF ? 'Generating PDF...' : 'Download PDF Report' }}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, onMounted } from 'vue';\r\nimport axios from 'axios';\r\nimport { jsPDF } from 'jspdf';\r\nimport 'jspdf-autotable';\r\n\r\nconst API_URL = import.meta.env.VITE_API_URL || 'http://localhost:5000';\r\n\r\nconst reportType = ref('monthly');\r\nconst selectedMonth = ref(new Date().toISOString().slice(0, 7));\r\nconst selectedYear = ref(new Date().getFullYear());\r\nconst availableYears = ref(Array.from({ length: 5 }, (_, i) => new Date().getFullYear() - i));\r\n\r\nconst reportData = ref([]);\r\nconst lowStockItems = ref([]);\r\nconst expiringBatches = ref([]);\r\nconst isLoading = ref(false);\r\nconst error = ref(null);\r\nconst isGeneratingPDF = ref(false);\r\n\r\nconst reportTitle = computed(() => {\r\n  if (reportType.value === 'monthly') {\r\n    return new Date(selectedMonth.value).toLocaleString('default', { month: 'long', year: 'numeric' });\r\n  } else {\r\n    return selectedYear.value.toString();\r\n  }\r\n});\r\n\r\nconst fetchReport = async () => {\r\n  isLoading.value = true;\r\n  error.value = null;\r\n\r\n  try {\r\n    const params = {\r\n      type: reportType.value,\r\n      year: reportType.value === 'yearly' ? selectedYear.value : selectedMonth.value.split('-')[0],\r\n      month: reportType.value === 'monthly' ? selectedMonth.value.split('-')[1] : undefined,\r\n    };\r\n\r\n    const response = await axios.get(`${API_URL}/api/inventory/report`, { params });\r\n    reportData.value = response.data.data;\r\n    lowStockItems.value = response.data.lowStockItems;\r\n    expiringBatches.value = response.data.expiringBatches;\r\n  } catch (err) {\r\n    console.error('Error fetching report:', err);\r\n    error.value = 'Failed to fetch report data. Please try again.';\r\n  } finally {\r\n    isLoading.value = false;\r\n  }\r\n};\r\n\r\nconst downloadPDF = async () => {\r\n  isGeneratingPDF.value = true;\r\n\r\n  try {\r\n    const doc = new jsPDF();\r\n\r\n    // Title\r\n    doc.setFontSize(18);\r\n    doc.text(`Inventory Report for ${reportTitle.value}`, 14, 20);\r\n\r\n    // Inventory Items Table\r\n    doc.autoTable({\r\n      startY: 30,\r\n      head: [['Item Name', 'Batch Name', 'Batch Quantity', 'Total Disbursed', 'Total Remaining']],\r\n      body: reportData.value.map(item => [\r\n        item.itemName,\r\n        item.batchName,\r\n        item.batchQuantity,\r\n        item.totalDisbursed,\r\n        item.totalRemaining,\r\n      ]),\r\n    });\r\n\r\n    // Low Stock Items\r\n    doc.setFontSize(14);\r\n    doc.text('Low Stock Items', 14, doc.lastAutoTable.finalY + 10);\r\n    if (lowStockItems.value.length > 0) {\r\n      doc.autoTable({\r\n        startY: doc.lastAutoTable.finalY + 15,\r\n        head: [['Item Name', 'Current Stock', 'Minimum Stock Level']],\r\n        body: lowStockItems.value.map(item => [\r\n          item.name,\r\n          item.quantity_in_stock,\r\n          item.min_stock_level,\r\n        ]),\r\n      });\r\n    } else {\r\n      doc.setFontSize(12);\r\n      doc.text('No items are currently low in stock.', 14, doc.lastAutoTable.finalY + 15);\r\n    }\r\n\r\n    // Expiring Batches\r\n    doc.setFontSize(14);\r\n    doc.text('Expiring Batches (Next 30 Days)', 14, doc.lastAutoTable.finalY + 10);\r\n    if (expiringBatches.value.length > 0) {\r\n      doc.autoTable({\r\n        startY: doc.lastAutoTable.finalY + 15,\r\n        head: [['Item Name', 'Batch Number', 'Expiry Date']],\r\n        body: expiringBatches.value.map(batch => [\r\n          batch.InventoryItem.name,\r\n          batch.batch_number,\r\n          formatDate(batch.expiry_date),\r\n        ]),\r\n      });\r\n    } else {\r\n      doc.setFontSize(12);\r\n      doc.text('No batches are expiring in the next 30 days.', 14, doc.lastAutoTable.finalY + 15);\r\n    }\r\n\r\n    // Save the PDF\r\n    doc.save(`Inventory_Report_${reportTitle.value.replace(' ', '_')}.pdf`);\r\n  } catch (err) {\r\n    console.error('Error generating PDF:', err);\r\n    error.value = 'Failed to generate PDF. Please try again.';\r\n  } finally {\r\n    isGeneratingPDF.value = false;\r\n  }\r\n};\r\n\r\nconst formatDate = (dateString) => {\r\n  return new Date(dateString).toLocaleDateString('en-US', {\r\n    year: 'numeric',\r\n    month: 'long',\r\n    day: 'numeric',\r\n  });\r\n};\r\n\r\nonMounted(fetchReport);\r\n</script>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}