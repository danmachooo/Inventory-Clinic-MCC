{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/Lenovo Pc/OneDrive - Department of Education/Desktop/MCDL-MINSU-CLINIC/Inventory-Clinic-MCC/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _objectSpread from \"C:/Users/Lenovo Pc/OneDrive - Department of Education/Desktop/MCDL-MINSU-CLINIC/Inventory-Clinic-MCC/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _toConsumableArray from \"C:/Users/Lenovo Pc/OneDrive - Department of Education/Desktop/MCDL-MINSU-CLINIC/Inventory-Clinic-MCC/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _asyncToGenerator from \"C:/Users/Lenovo Pc/OneDrive - Department of Education/Desktop/MCDL-MINSU-CLINIC/Inventory-Clinic-MCC/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.array.from.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.reduce.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.date.to-iso-string.js\";\nimport \"core-js/modules/es.date.to-string.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.object.define-property.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/es.string.search.js\";\nimport \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.filter.js\";\nimport \"core-js/modules/esnext.iterator.map.js\";\nimport \"core-js/modules/esnext.iterator.reduce.js\";\nimport { ref, onMounted, computed, watch } from 'vue';\nimport axios from 'axios';\nimport { PlusIcon, PencilIcon, ArchiveIcon } from 'lucide-vue-next';\nimport Swal from 'sweetalert2';\nvar API_URL = 'http://localhost:5000/api/inventory';\nvar itemsPerPage = 10;\nexport default {\n  __name: 'BatchManagement',\n  setup: function setup(__props, _ref) {\n    var __expose = _ref.expose;\n    __expose();\n    var batches = ref([]);\n    var inventoryItems = ref([]);\n    var showAddModal = ref(false);\n    var showEditModal = ref(false);\n    var showDisposeModal = ref(false);\n    var isSubmitting = ref(false);\n    var isDisposing = ref(false);\n    var selectedBatchId = ref(null);\n    var tableHeaders = ['Batch Number', 'Item', 'Quantity', 'Expiry Date', 'Supplier', 'Received Date', 'Status'];\n    var filters = ref({\n      search: '',\n      item: '',\n      status: ''\n    });\n    var currentBatch = ref({\n      id: null,\n      inventory_item_id: '',\n      batch_number: '',\n      quantity: 0,\n      expiry_date: '',\n      supplier: '',\n      received_date: ''\n    });\n\n    // Pagination\n    var currentPage = ref(1);\n    var fetchBatches = /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return axios.get(\"\".concat(API_URL, \"/items\"));\n            case 3:\n              response = _context.sent;\n              batches.value = response.data.data.reduce(function (acc, item) {\n                return [].concat(_toConsumableArray(acc), _toConsumableArray((item.batches || []).map(function (batch) {\n                  return _objectSpread(_objectSpread({}, batch), {}, {\n                    inventoryItem: {\n                      id: item.id,\n                      name: item.name\n                    }\n                  });\n                })));\n              }, []);\n              updateExpiredBatches();\n              _context.next = 12;\n              break;\n            case 8:\n              _context.prev = 8;\n              _context.t0 = _context[\"catch\"](0);\n              console.error('Error fetching batches:', _context.t0);\n              showErrorAlert('Failed to fetch batches', _context.t0.message);\n            case 12:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, null, [[0, 8]]);\n      }));\n      return function fetchBatches() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n    var fetchInventoryItems = /*#__PURE__*/function () {\n      var _ref3 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              _context2.next = 3;\n              return axios.get(\"\".concat(API_URL, \"/items\"));\n            case 3:\n              response = _context2.sent;\n              inventoryItems.value = response.data.data || [];\n              _context2.next = 11;\n              break;\n            case 7:\n              _context2.prev = 7;\n              _context2.t0 = _context2[\"catch\"](0);\n              console.error('Error fetching inventory items:', _context2.t0);\n              showErrorAlert('Failed to fetch inventory items', _context2.t0.message);\n            case 11:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, null, [[0, 7]]);\n      }));\n      return function fetchInventoryItems() {\n        return _ref3.apply(this, arguments);\n      };\n    }();\n    var handleSubmit = /*#__PURE__*/function () {\n      var _ref4 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.prev = 0;\n              isSubmitting.value = true;\n              if (!currentBatch.value.id) {\n                _context3.next = 8;\n                break;\n              }\n              _context3.next = 5;\n              return axios.put(\"\".concat(API_URL, \"/batches/\").concat(currentBatch.value.id), currentBatch.value);\n            case 5:\n              response = _context3.sent;\n              _context3.next = 11;\n              break;\n            case 8:\n              _context3.next = 10;\n              return axios.post(\"\".concat(API_URL, \"/batches\"), currentBatch.value);\n            case 10:\n              response = _context3.sent;\n            case 11:\n              if (!response.data.success) {\n                _context3.next = 18;\n                break;\n              }\n              _context3.next = 14;\n              return fetchBatches();\n            case 14:\n              closeModal();\n              showSuccessAlert('Success', currentBatch.value.id ? 'Batch updated successfully' : 'New batch added successfully');\n              _context3.next = 19;\n              break;\n            case 18:\n              showErrorAlert('Error', response.data.error || 'Failed to submit batch');\n            case 19:\n              _context3.next = 25;\n              break;\n            case 21:\n              _context3.prev = 21;\n              _context3.t0 = _context3[\"catch\"](0);\n              console.error('Error submitting batch:', _context3.t0);\n              showErrorAlert('Error', 'Failed to submit batch');\n            case 25:\n              _context3.prev = 25;\n              isSubmitting.value = false;\n              return _context3.finish(25);\n            case 28:\n            case \"end\":\n              return _context3.stop();\n          }\n        }, _callee3, null, [[0, 21, 25, 28]]);\n      }));\n      return function handleSubmit() {\n        return _ref4.apply(this, arguments);\n      };\n    }();\n    var editBatch = function editBatch(batch) {\n      var _batch$inventoryItem;\n      currentBatch.value = {\n        id: batch.id,\n        inventory_item_id: ((_batch$inventoryItem = batch.inventoryItem) === null || _batch$inventoryItem === void 0 ? void 0 : _batch$inventoryItem.id) || '',\n        batch_number: batch.batch_number,\n        quantity: batch.quantity,\n        expiry_date: batch.expiry_date ? new Date(batch.expiry_date).toISOString().split('T')[0] : '',\n        supplier: batch.supplier,\n        received_date: batch.received_date ? new Date(batch.received_date).toISOString().split('T')[0] : ''\n      };\n      showEditModal.value = true;\n    };\n    var confirmDispose = function confirmDispose(batch) {\n      selectedBatchId.value = batch.id;\n      showDisposeModal.value = true;\n    };\n    var handleDispose = /*#__PURE__*/function () {\n      var _ref5 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n          while (1) switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.prev = 0;\n              isDisposing.value = true;\n              _context4.next = 4;\n              return axios.put(\"\".concat(API_URL, \"/batches/\").concat(selectedBatchId.value, \"/dispose\"));\n            case 4:\n              response = _context4.sent;\n              if (!response.data.success) {\n                _context4.next = 12;\n                break;\n              }\n              _context4.next = 8;\n              return fetchBatches();\n            case 8:\n              showDisposeModal.value = false;\n              showSuccessAlert('Success', 'Batch disposed and inventory updated successfully');\n              _context4.next = 13;\n              break;\n            case 12:\n              showErrorAlert('Error', response.data.error || 'Failed to dispose batch');\n            case 13:\n              _context4.next = 19;\n              break;\n            case 15:\n              _context4.prev = 15;\n              _context4.t0 = _context4[\"catch\"](0);\n              console.error('Error disposing batch:', _context4.t0);\n              showErrorAlert('Error', 'Failed to dispose batch');\n            case 19:\n              _context4.prev = 19;\n              isDisposing.value = false;\n              return _context4.finish(19);\n            case 22:\n            case \"end\":\n              return _context4.stop();\n          }\n        }, _callee4, null, [[0, 15, 19, 22]]);\n      }));\n      return function handleDispose() {\n        return _ref5.apply(this, arguments);\n      };\n    }();\n    var closeModal = function closeModal() {\n      showAddModal.value = false;\n      showEditModal.value = false;\n      currentBatch.value = {\n        id: null,\n        inventory_item_id: '',\n        batch_number: '',\n        quantity: 0,\n        expiry_date: '',\n        supplier: '',\n        received_date: ''\n      };\n    };\n    var openAddModal = function openAddModal() {\n      currentBatch.value = {\n        id: null,\n        inventory_item_id: '',\n        batch_number: '',\n        quantity: 0,\n        expiry_date: '',\n        supplier: '',\n        received_date: ''\n      };\n      showAddModal.value = true;\n    };\n    var formatDate = function formatDate(date) {\n      if (!date) return '';\n      return new Date(date).toLocaleDateString();\n    };\n    var updateExpiredBatches = function updateExpiredBatches() {\n      var currentDate = new Date();\n      batches.value = batches.value.map(function (batch) {\n        return _objectSpread(_objectSpread({}, batch), {}, {\n          isExpired: new Date(batch.expiry_date) < currentDate\n        });\n      });\n    };\n    var getBatchStatus = function getBatchStatus(batch) {\n      return batch.isExpired ? 'Expired' : 'Active';\n    };\n    var getBatchStatusClass = function getBatchStatusClass(batch) {\n      return batch.isExpired ? 'px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800' : 'px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800';\n    };\n    var filteredBatches = computed(function () {\n      return batches.value.filter(function (batch) {\n        var _batch$inventoryItem2;\n        var matchesSearch = (batch.batch_number || '').toLowerCase().includes(filters.value.search.toLowerCase()) || (batch.supplier || '').toLowerCase().includes(filters.value.search.toLowerCase()) || (((_batch$inventoryItem2 = batch.inventoryItem) === null || _batch$inventoryItem2 === void 0 ? void 0 : _batch$inventoryItem2.name) || '').toLowerCase().includes(filters.value.search.toLowerCase());\n        var matchesItem = !filters.value.item || batch.inventory_item_id === filters.value.item;\n        var matchesStatus = !filters.value.status || filters.value.status === 'expired' && batch.isExpired || filters.value.status === 'active' && !batch.isExpired;\n        return matchesSearch && matchesItem && matchesStatus;\n      });\n    });\n    var totalPages = computed(function () {\n      return Math.ceil(filteredBatches.value.length / itemsPerPage);\n    });\n    var paginatedBatches = computed(function () {\n      var start = (currentPage.value - 1) * itemsPerPage;\n      var end = start + itemsPerPage;\n      return filteredBatches.value.slice(start, end);\n    });\n    var paginationStart = computed(function () {\n      return (currentPage.value - 1) * itemsPerPage + 1;\n    });\n    var paginationEnd = computed(function () {\n      return Math.min(currentPage.value * itemsPerPage, filteredBatches.value.length);\n    });\n    var displayedPages = computed(function () {\n      var range = 2;\n      var start = Math.max(1, currentPage.value - range);\n      var end = Math.min(totalPages.value, currentPage.value + range);\n      if (end - start + 1 < range * 2 + 1) {\n        if (start === 1) {\n          end = Math.min(start + range * 2, totalPages.value);\n        } else {\n          start = Math.max(end - range * 2, 1);\n        }\n      }\n      return Array.from({\n        length: end - start + 1\n      }, function (_, i) {\n        return start + i;\n      });\n    });\n    var prevPage = function prevPage() {\n      if (currentPage.value > 1) {\n        currentPage.value--;\n      }\n    };\n    var nextPage = function nextPage() {\n      if (currentPage.value < totalPages.value) {\n        currentPage.value++;\n      }\n    };\n    var goToPage = function goToPage(page) {\n      currentPage.value = page;\n    };\n\n    // SweetAlert functions\n    var showSuccessAlert = function showSuccessAlert(title, message) {\n      Swal.fire({\n        icon: 'success',\n        title: title,\n        text: message,\n        confirmButtonColor: '#3085d6'\n      });\n    };\n    var showErrorAlert = function showErrorAlert(title, message) {\n      Swal.fire({\n        icon: 'error',\n        title: title,\n        text: message,\n        confirmButtonColor: '#d33'\n      });\n    };\n\n    // Watch for filter changes\n    watch([function () {\n      return filters.value.search;\n    }, function () {\n      return filters.value.item;\n    }, function () {\n      return filters.value.status;\n    }], function () {\n      currentPage.value = 1; // Reset to first page when filters change\n    });\n    onMounted(function () {\n      fetchBatches();\n      fetchInventoryItems();\n    });\n    var __returned__ = {\n      API_URL: API_URL,\n      batches: batches,\n      inventoryItems: inventoryItems,\n      showAddModal: showAddModal,\n      showEditModal: showEditModal,\n      showDisposeModal: showDisposeModal,\n      isSubmitting: isSubmitting,\n      isDisposing: isDisposing,\n      selectedBatchId: selectedBatchId,\n      tableHeaders: tableHeaders,\n      filters: filters,\n      currentBatch: currentBatch,\n      itemsPerPage: itemsPerPage,\n      currentPage: currentPage,\n      fetchBatches: fetchBatches,\n      fetchInventoryItems: fetchInventoryItems,\n      handleSubmit: handleSubmit,\n      editBatch: editBatch,\n      confirmDispose: confirmDispose,\n      handleDispose: handleDispose,\n      closeModal: closeModal,\n      openAddModal: openAddModal,\n      formatDate: formatDate,\n      updateExpiredBatches: updateExpiredBatches,\n      getBatchStatus: getBatchStatus,\n      getBatchStatusClass: getBatchStatusClass,\n      filteredBatches: filteredBatches,\n      totalPages: totalPages,\n      paginatedBatches: paginatedBatches,\n      paginationStart: paginationStart,\n      paginationEnd: paginationEnd,\n      displayedPages: displayedPages,\n      prevPage: prevPage,\n      nextPage: nextPage,\n      goToPage: goToPage,\n      showSuccessAlert: showSuccessAlert,\n      showErrorAlert: showErrorAlert,\n      ref: ref,\n      onMounted: onMounted,\n      computed: computed,\n      watch: watch,\n      get axios() {\n        return axios;\n      },\n      get PlusIcon() {\n        return PlusIcon;\n      },\n      get PencilIcon() {\n        return PencilIcon;\n      },\n      get ArchiveIcon() {\n        return ArchiveIcon;\n      },\n      get Swal() {\n        return Swal;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","computed","watch","axios","PlusIcon","PencilIcon","ArchiveIcon","Swal","API_URL","itemsPerPage","batches","inventoryItems","showAddModal","showEditModal","showDisposeModal","isSubmitting","isDisposing","selectedBatchId","tableHeaders","filters","search","item","status","currentBatch","id","inventory_item_id","batch_number","quantity","expiry_date","supplier","received_date","currentPage","fetchBatches","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_callee$","_context","prev","next","get","concat","sent","value","data","reduce","acc","_toConsumableArray","map","batch","_objectSpread","inventoryItem","name","updateExpiredBatches","t0","console","error","showErrorAlert","message","stop","apply","arguments","fetchInventoryItems","_ref3","_callee2","_callee2$","_context2","handleSubmit","_ref4","_callee3","_callee3$","_context3","put","post","success","closeModal","showSuccessAlert","finish","editBatch","_batch$inventoryItem","Date","toISOString","split","confirmDispose","handleDispose","_ref5","_callee4","_callee4$","_context4","openAddModal","formatDate","date","toLocaleDateString","currentDate","isExpired","getBatchStatus","getBatchStatusClass","filteredBatches","filter","_batch$inventoryItem2","matchesSearch","toLowerCase","includes","matchesItem","matchesStatus","totalPages","Math","ceil","length","paginatedBatches","start","end","slice","paginationStart","paginationEnd","min","displayedPages","range","max","Array","from","_","i","prevPage","nextPage","goToPage","page","title","fire","icon","text","confirmButtonColor"],"sources":["C:/Users/Lenovo Pc/OneDrive - Department of Education/Desktop/MCDL-MINSU-CLINIC/Inventory-Clinic-MCC/frontend/src/views/BatchManagement.vue"],"sourcesContent":["<template>\r\n  <div class=\"container mx-auto px-4 py-8\">\r\n    <div class=\"flex justify-between items-center mb-6\">\r\n      <h1 class=\"text-3xl font-semibold text-gray-800\">Batch Management</h1>\r\n      <button\r\n        @click=\"openAddModal\"\r\n        class=\"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition duration-300\"\r\n      >\r\n        <PlusIcon class=\"h-5 w-5\" />\r\n        Add New Batch\r\n      </button>\r\n    </div>\r\n\r\n    <!-- Filtering -->\r\n    <div class=\"mb-6 flex flex-wrap gap-4\">\r\n      <input\r\n        v-model=\"filters.search\"\r\n        placeholder=\"Search batches...\"\r\n        class=\"px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n      />\r\n      <select\r\n        v-model=\"filters.item\"\r\n        class=\"px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n      >\r\n        <option value=\"\">All Items</option>\r\n        <option v-for=\"item in inventoryItems\" :key=\"item.id\" :value=\"item.id\">\r\n          {{ item.name }}\r\n        </option>\r\n      </select>\r\n      <select\r\n        v-model=\"filters.status\"\r\n        class=\"px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n      >\r\n        <option value=\"\">All Statuses</option>\r\n        <option value=\"active\">Active</option>\r\n        <option value=\"expired\">Expired</option>\r\n      </select>\r\n    </div>\r\n\r\n    <!-- Batches List -->\r\n    <div class=\"bg-white shadow-md rounded-lg overflow-hidden\">\r\n      <table class=\"min-w-full divide-y divide-gray-200\">\r\n        <thead class=\"bg-gray-50\">\r\n          <tr>\r\n            <th v-for=\"header in tableHeaders\" :key=\"header\" class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n              {{ header }}\r\n            </th>\r\n            <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n              Actions\r\n            </th>\r\n          </tr>\r\n        </thead>\r\n        <tbody class=\"bg-white divide-y divide-gray-200\">\r\n          <tr v-for=\"batch in paginatedBatches\" :key=\"batch.id\" class=\"hover:bg-gray-50\">\r\n            <td class=\"px-6 py-4 whitespace-nowrap\">{{ batch.batch_number }}</td>\r\n            <td class=\"px-6 py-4 whitespace-nowrap\">{{ batch.inventoryItem?.name }}</td>\r\n            <td class=\"px-6 py-4 whitespace-nowrap\">{{ batch.quantity }}</td>\r\n            <td class=\"px-6 py-4 whitespace-nowrap\">{{ formatDate(batch.expiry_date) }}</td>\r\n            <td class=\"px-6 py-4 whitespace-nowrap\">{{ batch.supplier }}</td>\r\n            <td class=\"px-6 py-4 whitespace-nowrap\">{{ formatDate(batch.received_date) }}</td>\r\n            <td class=\"px-6 py-4 whitespace-nowrap\">\r\n              <span :class=\"getBatchStatusClass(batch)\">\r\n                {{ getBatchStatus(batch) }}\r\n              </span>\r\n            </td>\r\n            <td class=\"px-6 py-4 whitespace-nowrap space-x-2\">\r\n              <button \r\n                @click=\"editBatch(batch)\" \r\n                class=\"text-blue-600 hover:text-blue-900 transition duration-300\"\r\n                title=\"Edit Batch\"\r\n              >\r\n                <PencilIcon class=\"h-5 w-5\" />\r\n              </button>\r\n              <button \r\n                @click=\"confirmDispose(batch)\" \r\n                class=\"text-red-600 hover:text-red-900 transition duration-300\"\r\n                title=\"Dispose Batch\"\r\n              >\r\n                <ArchiveIcon class=\"h-5 w-5\" />\r\n              </button>\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n\r\n    <!-- Pagination -->\r\n    <div class=\"mt-6 flex justify-between items-center\">\r\n      <div>\r\n        <span class=\"text-sm text-gray-700\">\r\n          Showing {{ paginationStart }} to {{ paginationEnd }} of {{ filteredBatches.length }} entries\r\n        </span>\r\n      </div>\r\n      <div class=\"space-x-2\">\r\n        <button \r\n          @click=\"prevPage\" \r\n          :disabled=\"currentPage === 1\" \r\n          class=\"px-3 py-1 border rounded-md disabled:opacity-50 transition duration-300\"\r\n        >\r\n          Previous\r\n        </button>\r\n        <button \r\n          v-for=\"page in displayedPages\" \r\n          :key=\"page\" \r\n          @click=\"goToPage(page)\" \r\n          :class=\"['px-3 py-1 border rounded-md transition duration-300', currentPage === page ? 'bg-blue-500 text-white' : '']\"\r\n        >\r\n          {{ page }}\r\n        </button>\r\n        <button \r\n          @click=\"nextPage\" \r\n          :disabled=\"currentPage === totalPages\" \r\n          class=\"px-3 py-1 border rounded-md disabled:opacity-50 transition duration-300\"\r\n        >\r\n          Next\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Add/Edit Modal -->\r\n    <div v-if=\"showAddModal || showEditModal\" class=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center\">\r\n      <div class=\"bg-white rounded-lg p-6 w-full max-w-md\">\r\n        <h2 class=\"text-xl font-semibold mb-4\">\r\n          {{ currentBatch.id ? 'Edit Batch' : 'Add New Batch' }}\r\n        </h2>\r\n        <form @submit.prevent=\"handleSubmit\" class=\"space-y-4\">\r\n          <div>\r\n            <label class=\"block text-sm font-medium text-gray-700\">Item</label>\r\n            <select \r\n              v-model=\"currentBatch.inventory_item_id\"\r\n              required\r\n              class=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500\"\r\n            >\r\n              <option value=\"\">Select an item</option>\r\n              <option v-for=\"item in inventoryItems\" :key=\"item.id\" :value=\"item.id\">\r\n                {{ item.name }}\r\n              </option>\r\n            </select>\r\n          </div>\r\n          <div>\r\n            <label class=\"block text-sm font-medium text-gray-700\">Quantity</label>\r\n            <input \r\n              v-model=\"currentBatch.quantity\"\r\n              type=\"number\"\r\n              min=\"0\"\r\n              required\r\n              class=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500\"\r\n            />\r\n          </div>\r\n          <div>\r\n            <label class=\"block text-sm font-medium text-gray-700\">Expiry Date</label>\r\n            <input \r\n              v-model=\"currentBatch.expiry_date\"\r\n              type=\"date\"\r\n              required\r\n              class=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500\"\r\n            />\r\n          </div>\r\n          <div>\r\n            <label class=\"block text-sm font-medium text-gray-700\">Supplier</label>\r\n            <input \r\n              v-model=\"currentBatch.supplier\"\r\n              type=\"text\"\r\n              required\r\n              class=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500\"\r\n            />\r\n          </div>\r\n          <div>\r\n            <label class=\"block text-sm font-medium text-gray-700\">Received Date</label>\r\n            <input \r\n              v-model=\"currentBatch.received_date\"\r\n              type=\"date\"\r\n              required\r\n              class=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500\"\r\n            />\r\n          </div>\r\n          <div class=\"flex justify-end space-x-2 mt-6\">\r\n            <button\r\n              type=\"button\"\r\n              @click=\"closeModal\"\r\n              class=\"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition duration-300\"\r\n            >\r\n              Cancel\r\n            </button>\r\n            <button\r\n              type=\"submit\"\r\n              class=\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition duration-300\"\r\n              :disabled=\"isSubmitting\"\r\n            >\r\n              {{ isSubmitting ? 'Saving...' : (currentBatch.id ? 'Update' : 'Save') }}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Dispose Confirmation Modal -->\r\n    <div v-if=\"showDisposeModal\" class=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center\">\r\n      <div class=\"bg-white rounded-lg p-6 w-full max-w-md\">\r\n        <h2 class=\"text-xl font-semibold mb-4\">Confirm Dispose</h2>\r\n        <p>Are you sure you want to dispose of this batch? This action will reduce the inventory quantity and cannot be undone.</p>\r\n        <div class=\"flex justify-end space-x-2 mt-6\">\r\n          <button\r\n            @click=\"showDisposeModal = false\"\r\n            class=\"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition duration-300\"\r\n          >\r\n            Cancel\r\n          </button>\r\n          <button\r\n            @click=\"handleDispose\"\r\n            class=\"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition duration-300\"\r\n            :disabled=\"isDisposing\"\r\n          >\r\n            {{ isDisposing ? 'Disposing...' : 'Dispose' }}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, computed, watch } from 'vue'\r\nimport axios from 'axios'\r\nimport { PlusIcon, PencilIcon, ArchiveIcon } from 'lucide-vue-next'\r\nimport Swal from 'sweetalert2'\r\n\r\nconst API_URL = 'http://localhost:5000/api/inventory'\r\n\r\nconst batches = ref([])\r\nconst inventoryItems = ref([])\r\nconst showAddModal = ref(false)\r\nconst showEditModal = ref(false)\r\nconst showDisposeModal = ref(false)\r\nconst isSubmitting = ref(false)\r\nconst isDisposing = ref(false)\r\nconst selectedBatchId = ref(null)\r\n\r\nconst tableHeaders = ['Batch Number', 'Item', 'Quantity', 'Expiry Date', 'Supplier', 'Received Date', 'Status']\r\n\r\nconst filters = ref({\r\n  search: '',\r\n  item: '',\r\n  status: ''\r\n})\r\n\r\nconst currentBatch = ref({\r\n  id: null,\r\n  inventory_item_id: '',\r\n  batch_number: '',\r\n  quantity: 0,\r\n  expiry_date: '',\r\n  supplier: '',\r\n  received_date: ''\r\n})\r\n\r\n// Pagination\r\nconst itemsPerPage = 10\r\nconst currentPage = ref(1)\r\n\r\nconst fetchBatches = async () => {\r\n  try {\r\n    const response = await axios.get(`${API_URL}/items`)\r\n    batches.value = response.data.data.reduce((acc, item) => {\r\n      return [...acc, ...(item.batches || []).map(batch => ({\r\n        ...batch,\r\n        inventoryItem: {\r\n          id: item.id,\r\n          name: item.name\r\n        }\r\n      }))]\r\n    }, [])\r\n    updateExpiredBatches()\r\n  } catch (error) {\r\n    console.error('Error fetching batches:', error)\r\n    showErrorAlert('Failed to fetch batches', error.message)\r\n  }\r\n}\r\n\r\nconst fetchInventoryItems = async () => {\r\n  try {\r\n    const response = await axios.get(`${API_URL}/items`)\r\n    inventoryItems.value = response.data.data || []\r\n  } catch (error) {\r\n    console.error('Error fetching inventory items:', error)\r\n    showErrorAlert('Failed to fetch inventory items', error.message)\r\n  }\r\n}\r\n\r\nconst handleSubmit = async () => {\r\n  try {\r\n    isSubmitting.value = true\r\n    let response\r\n    \r\n    if (currentBatch.value.id) {\r\n      response = await axios.put(`${API_URL}/batches/${currentBatch.value.id}`, currentBatch.value)\r\n    } else {\r\n      response = await axios.post(`${API_URL}/batches`, currentBatch.value)\r\n    }\r\n    if (response.data.success) {\r\n      await fetchBatches()\r\n      closeModal()\r\n      showSuccessAlert('Success', currentBatch.value.id ? 'Batch updated successfully' : 'New batch added successfully')\r\n    } else {\r\n      showErrorAlert('Error', response.data.error || 'Failed to submit batch')\r\n    }\r\n  } catch (error) {\r\n    console.error('Error submitting batch:', error)\r\n    showErrorAlert('Error', 'Failed to submit batch')\r\n  } finally {\r\n    isSubmitting.value = false\r\n  }\r\n}\r\n\r\nconst editBatch = (batch) => {\r\n  currentBatch.value = { \r\n    id: batch.id,\r\n    inventory_item_id: batch.inventoryItem?.id || '',\r\n    batch_number: batch.batch_number,\r\n    quantity: batch.quantity,\r\n    expiry_date: batch.expiry_date ? new Date(batch.expiry_date).toISOString().split('T')[0] : '',\r\n    supplier: batch.supplier,\r\n    received_date: batch.received_date ? new Date(batch.received_date).toISOString().split('T')[0] : ''\r\n  }\r\n  showEditModal.value = true\r\n}\r\n\r\nconst confirmDispose = (batch) => {\r\n  selectedBatchId.value = batch.id\r\n  showDisposeModal.value = true\r\n}\r\n\r\nconst handleDispose = async () => {\r\n  try {\r\n    isDisposing.value = true\r\n    const response = await axios.put(`${API_URL}/batches/${selectedBatchId.value}/dispose`)\r\n    if (response.data.success) {\r\n      await fetchBatches()\r\n      showDisposeModal.value = false\r\n      showSuccessAlert('Success', 'Batch disposed and inventory updated successfully')\r\n    } else {\r\n      showErrorAlert('Error', response.data.error || 'Failed to dispose batch')\r\n    }\r\n  } catch (error) {\r\n    console.error('Error disposing batch:', error)\r\n    showErrorAlert('Error', 'Failed to dispose batch')\r\n  } finally {\r\n    isDisposing.value = false\r\n  }\r\n}\r\n\r\nconst closeModal = () => {\r\n  showAddModal.value = false\r\n  showEditModal.value = false\r\n  currentBatch.value = {\r\n    id: null,\r\n    inventory_item_id: '',\r\n    batch_number: '',\r\n    quantity: 0,\r\n    expiry_date: '',\r\n    supplier: '',\r\n    received_date: ''\r\n  }\r\n}\r\n\r\nconst openAddModal = () => {\r\n  currentBatch.value = {\r\n    id: null,\r\n    inventory_item_id: '',\r\n    batch_number: '',\r\n    quantity: 0,\r\n    expiry_date: '',\r\n    supplier: '',\r\n    received_date: ''\r\n  }\r\n  showAddModal.value = true\r\n}\r\n\r\nconst formatDate = (date) => {\r\n  if (!date) return ''\r\n  return new Date(date).toLocaleDateString()\r\n}\r\n\r\nconst updateExpiredBatches = () => {\r\n  const currentDate = new Date()\r\n  batches.value = batches.value.map(batch => ({\r\n    ...batch,\r\n    isExpired: new Date(batch.expiry_date) < currentDate\r\n  }))\r\n}\r\n\r\nconst getBatchStatus = (batch) => {\r\n  return batch.isExpired ? 'Expired' : 'Active'\r\n}\r\n\r\nconst getBatchStatusClass = (batch) => {\r\n  return batch.isExpired\r\n    ? 'px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800'\r\n    : 'px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800'\r\n}\r\n\r\nconst filteredBatches = computed(() => {\r\n  return batches.value.filter(batch => {\r\n    const matchesSearch = (batch.batch_number || '').toLowerCase().includes(filters.value.search.toLowerCase()) ||\r\n                          (batch.supplier || '').toLowerCase().includes(filters.value.search.toLowerCase()) ||\r\n                          (batch.inventoryItem?.name || '').toLowerCase().includes(filters.value.search.toLowerCase())\r\n    const matchesItem = !filters.value.item || batch.inventory_item_id === filters.value.item\r\n    const matchesStatus = !filters.value.status || \r\n                          (filters.value.status === 'expired' && batch.isExpired) ||\r\n                          (filters.value.status === 'active' && !batch.isExpired)\r\n    return matchesSearch && matchesItem && matchesStatus\r\n  })\r\n})\r\n\r\nconst totalPages = computed(() => Math.ceil(filteredBatches.value.length / itemsPerPage))\r\n\r\nconst paginatedBatches = computed(() => {\r\n  const start = (currentPage.value - 1) * itemsPerPage\r\n  const end = start + itemsPerPage\r\n  return filteredBatches.value.slice(start, end)\r\n})\r\n\r\nconst paginationStart = computed(() => (currentPage.value - 1) * itemsPerPage + 1)\r\nconst paginationEnd = computed(() => Math.min(currentPage.value * itemsPerPage, filteredBatches.value.length))\r\n\r\nconst displayedPages = computed(() => {\r\n  const range = 2\r\n  let start = Math.max(1, currentPage.value - range)\r\n  let end = Math.min(totalPages.value, currentPage.value + range)\r\n\r\n  if (end - start + 1 < range * 2 + 1) {\r\n    if (start === 1) {\r\n      end = Math.min(start + range * 2, totalPages.value)\r\n    } else {\r\n      start = Math.max(end - range * 2, 1)\r\n    }\r\n  }\r\n\r\n  return Array.from({ length: end - start + 1 }, (_, i) => start + i)\r\n})\r\n\r\nconst prevPage = () => {\r\n  if (currentPage.value > 1) {\r\n    currentPage.value--\r\n  }\r\n}\r\n\r\nconst nextPage = () => {\r\n  if (currentPage.value < totalPages.value) {\r\n    currentPage.value++\r\n  }\r\n}\r\n\r\nconst goToPage = (page) => {\r\n  currentPage.value = page\r\n}\r\n\r\n// SweetAlert functions\r\nconst showSuccessAlert = (title, message) => {\r\n  Swal.fire({\r\n    icon: 'success',\r\n    title: title,\r\n    text: message,\r\n    confirmButtonColor: '#3085d6',\r\n  })\r\n}\r\n\r\nconst showErrorAlert = (title, message) => {\r\n  Swal.fire({\r\n    icon: 'error',\r\n    title: title,\r\n    text: message,\r\n    confirmButtonColor: '#d33',\r\n  })\r\n}\r\n\r\n// Watch for filter changes\r\nwatch([() => filters.value.search, () => filters.value.item, () => filters.value.status], () => {\r\n  currentPage.value = 1 // Reset to first page when filters change\r\n})\r\n\r\nonMounted(() => {\r\n  fetchBatches()\r\n  fetchInventoryItems()\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n/* Add any additional styles here if needed */\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}