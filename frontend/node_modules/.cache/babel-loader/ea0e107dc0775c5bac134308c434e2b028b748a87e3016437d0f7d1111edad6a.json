{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/Lenovo Pc/OneDrive - Department of Education/Desktop/MCDL-MINSU-CLINIC/Inventory-Clinic-MCC/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/Lenovo Pc/OneDrive - Department of Education/Desktop/MCDL-MINSU-CLINIC/Inventory-Clinic-MCC/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _objectSpread from \"C:/Users/Lenovo Pc/OneDrive - Department of Education/Desktop/MCDL-MINSU-CLINIC/Inventory-Clinic-MCC/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.array.find.js\";\nimport \"core-js/modules/es.array.from.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.date.to-string.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.object.define-property.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.parse-int.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.filter.js\";\nimport \"core-js/modules/esnext.iterator.find.js\";\nimport { ref, computed, onMounted, watch } from 'vue';\nimport { PlusIcon, UploadIcon, EditIcon, SearchIcon, ChevronLeftIcon, ChevronRightIcon, EyeIcon, PackageOpenIcon, HistoryIcon } from 'lucide-vue-next';\nimport axios from 'axios';\nimport debounce from 'lodash/debounce';\nimport Swal from 'sweetalert2';\nvar API_URL = 'http://localhost:5000/api/inventory'; // Replace with your actual API URL\n\nvar correctPassword = 'asd'; // Replace with your actual password or retrieve it securely.\n\nvar historyItemsPerPage = 10;\nvar itemsPerPage = 10;\nexport default {\n  __name: 'Inventory',\n  setup: function setup(__props, _ref) {\n    var __expose = _ref.expose;\n    __expose();\n    var items = ref([]);\n    var categories = ref([]);\n    var tableHeaders = ['Name', 'Description', 'Category', 'Quantity in Stock', 'Min Stock Level', 'Reorder Level'];\n    var searchQuery = ref('');\n    var selectedCategory = ref('');\n    var showAddModal = ref(false);\n    var showViewModal = ref(false);\n    var showReduceStockModal = ref(false);\n    var showHistoryModal = ref(false);\n    var showNewCategoryModal = ref(false);\n    var currentItem = ref({});\n    var reduceQuantity = ref(0);\n    var patientName = ref('');\n    var itemHistory = ref([]);\n    var newCategory = ref({\n      name: '',\n      description: ''\n    });\n    var showPasswordModal = ref(false);\n    var enteredPassword = ref('');\n    var validatePassword = function validatePassword() {\n      if (enteredPassword.value === correctPassword) {\n        showPasswordModal.value = false;\n        enteredPassword.value = '';\n        if (modalContext.value === 'edit-item') {\n          showAddModal.value = true; // Open the edit item modal\n        } else if (modalContext.value === 'reduce-stock') {\n          showReduceStockModal.value = true; // Open the reduce stock modal\n        }\n        modalContext.value = ''; // Reset context after use\n      } else {\n        showErrorAlert('Invalid Password', 'The password you entered is incorrect.');\n      }\n    };\n    var modalContext = ref(''); // Tracks the context for the password modal\n\n    var openPasswordModal = function openPasswordModal(item, context) {\n      currentItem.value = _objectSpread({}, item); // Store the item being acted upon\n      modalContext.value = context; // Set the context ('edit-item' or 'reduce-stock')\n      showPasswordModal.value = true;\n    };\n    var closePasswordModal = function closePasswordModal() {\n      showPasswordModal.value = false;\n      enteredPassword.value = ''; // Clear password input\n      modalContext.value = ''; // Reset context\n    };\n    var historyCurrentPage = ref(1);\n    var historyTotalPages = computed(function () {\n      return Math.ceil(itemHistory.value.length / historyItemsPerPage);\n    });\n    var historyPaginationStart = computed(function () {\n      return Math.max((historyCurrentPage.value - 1) * historyItemsPerPage + 1, 0);\n    });\n    var historyPaginationEnd = computed(function () {\n      return Math.min(historyCurrentPage.value * historyItemsPerPage, itemHistory.value.length);\n    });\n    var paginatedHistory = computed(function () {\n      var start = (historyCurrentPage.value - 1) * historyItemsPerPage;\n      var end = start + historyItemsPerPage;\n      return itemHistory.value.slice(start, end);\n    });\n    var editingItem = ref(null);\n\n    // Pagination\n    var currentPage = ref(1);\n    var totalItems = ref(0);\n    var totalPages = computed(function () {\n      return Math.ceil(totalItems.value / itemsPerPage);\n    });\n    var paginationStart = computed(function () {\n      return Math.max((currentPage.value - 1) * itemsPerPage + 1, 0);\n    });\n    var paginationEnd = computed(function () {\n      return Math.min(currentPage.value * itemsPerPage, totalItems.value);\n    });\n    var displayedPages = computed(function () {\n      var range = 2;\n      var start = Math.max(1, currentPage.value - range);\n      var end = Math.min(totalPages.value, currentPage.value + range);\n      if (end - start + 1 < range * 2 + 1) {\n        if (start === 1) {\n          end = Math.min(start + range * 2, totalPages.value);\n        } else {\n          start = Math.max(end - range * 2, 1);\n        }\n      }\n      return Array.from({\n        length: end - start + 1\n      }, function (_, i) {\n        return start + i;\n      });\n    });\n\n    // Watch for category selection\n    watch(function () {\n      return currentItem.value.category_id;\n    }, function (newValue) {\n      if (newValue === 'new') {\n        showNewCategoryModal.value = true;\n        currentItem.value.category_id = ''; // Reset selection\n      }\n    });\n\n    // Add new method to handle category changes\n    var handleCategoryChange = function handleCategoryChange(event) {\n      var value = event.target.value;\n      if (value === 'new') {\n        showNewCategoryModal.value = true;\n        // Store the previous selection\n        selectedCategory.value = '';\n      } else {\n        fetchItems();\n      }\n    };\n\n    // Add new methods for category management\n    var closeNewCategoryModal = function closeNewCategoryModal() {\n      showNewCategoryModal.value = false;\n      newCategory.value = {\n        name: '',\n        description: ''\n      };\n    };\n\n    // Update submitNewCategory to handle both contexts\n    var submitNewCategory = /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var response, newCat;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return axios.post(\"\".concat(API_URL, \"/categories\"), newCategory.value);\n            case 3:\n              response = _context.sent;\n              if (response.data.success) {\n                newCat = response.data.data; // Add the new category to the categories list\n                categories.value.push(newCat);\n\n                // If adding from the item modal, select the new category\n                if (showAddModal.value) {\n                  currentItem.value.category_id = newCat.id;\n                }\n\n                // Close the modal and reset form\n                closeNewCategoryModal();\n                // Fetch items to refresh the list\n                fetchItems();\n                showSuccessAlert('Success', 'New category added successfully');\n              }\n              _context.next = 11;\n              break;\n            case 7:\n              _context.prev = 7;\n              _context.t0 = _context[\"catch\"](0);\n              console.error('Error creating category:', _context.t0);\n              showErrorAlert('Error', 'Failed to create new category');\n            case 11:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, null, [[0, 7]]);\n      }));\n      return function submitNewCategory() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n    onMounted(function () {\n      fetchCategories();\n      fetchItems();\n    });\n    var fetchCategories = /*#__PURE__*/function () {\n      var _ref3 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              _context2.next = 3;\n              return axios.get(\"\".concat(API_URL, \"/categories\"));\n            case 3:\n              response = _context2.sent;\n              categories.value = response.data.data;\n              _context2.next = 11;\n              break;\n            case 7:\n              _context2.prev = 7;\n              _context2.t0 = _context2[\"catch\"](0);\n              console.error('Error fetching categories:', _context2.t0);\n              showErrorAlert('Error', 'Failed to fetch categories');\n            case 11:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, null, [[0, 7]]);\n      }));\n      return function fetchCategories() {\n        return _ref3.apply(this, arguments);\n      };\n    }();\n    var debouncedFetchItems = debounce(function () {\n      fetchItems();\n    }, 300);\n    watch(searchQuery, function () {\n      debouncedFetchItems();\n    });\n    watch(selectedCategory, function () {\n      fetchItems();\n    });\n    var fetchItems = /*#__PURE__*/function () {\n      var _ref4 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.prev = 0;\n              _context3.next = 3;\n              return axios.get(\"\".concat(API_URL, \"/items\"), {\n                params: {\n                  page: currentPage.value,\n                  limit: itemsPerPage,\n                  search: searchQuery.value,\n                  category: selectedCategory.value\n                }\n              });\n            case 3:\n              response = _context3.sent;\n              if (response.data.success) {\n                items.value = response.data.data || [];\n                totalItems.value = response.data.total_count || 0;\n                if (currentPage.value > totalPages.value) {\n                  currentPage.value = 1;\n                }\n              } else {\n                showErrorAlert('Error', 'Failed to fetch items');\n              }\n              _context3.next = 11;\n              break;\n            case 7:\n              _context3.prev = 7;\n              _context3.t0 = _context3[\"catch\"](0);\n              console.error('Error fetching items:', _context3.t0);\n              showErrorAlert('Error', 'Failed to fetch items');\n            case 11:\n            case \"end\":\n              return _context3.stop();\n          }\n        }, _callee3, null, [[0, 7]]);\n      }));\n      return function fetchItems() {\n        return _ref4.apply(this, arguments);\n      };\n    }();\n    var prevPage = function prevPage() {\n      if (currentPage.value > 1) {\n        currentPage.value--;\n        fetchItems();\n      }\n    };\n    var nextPage = function nextPage() {\n      if (currentPage.value < totalPages.value) {\n        currentPage.value++;\n        fetchItems();\n      }\n    };\n    var goToPage = function goToPage(page) {\n      currentPage.value = page;\n      fetchItems();\n    };\n    var editItem = function editItem(item) {\n      // editingItem.value = item\n      // currentItem.value = { ...item }\n      // showAddModal.value = true\n      openPasswordModal(item, 'edit-item');\n    };\n    var closeModal = function closeModal() {\n      showAddModal.value = false;\n      editingItem.value = null;\n      currentItem.value = {\n        name: '',\n        description: '',\n        category_id: null,\n        quantity_in_stock: 0,\n        min_stock_level: 0,\n        reorder_level: 0\n      };\n    };\n    var submitItem = /*#__PURE__*/function () {\n      var _ref5 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {\n        var itemData;\n        return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n          while (1) switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.prev = 0;\n              itemData = {\n                name: currentItem.value.name,\n                description: currentItem.value.description,\n                category_id: parseInt(currentItem.value.category_id),\n                quantity_in_stock: parseInt(currentItem.value.quantity_in_stock),\n                min_stock_level: parseInt(currentItem.value.min_stock_level),\n                reorder_level: parseInt(currentItem.value.reorder_level)\n              };\n              if (!editingItem.value) {\n                _context4.next = 8;\n                break;\n              }\n              _context4.next = 5;\n              return axios.put(\"\".concat(API_URL, \"/items/\").concat(editingItem.value.id), itemData);\n            case 5:\n              showSuccessAlert('Success', 'Item updated successfully');\n              _context4.next = 11;\n              break;\n            case 8:\n              _context4.next = 10;\n              return axios.post(\"\".concat(API_URL, \"/items\"), itemData);\n            case 10:\n              showSuccessAlert('Success', 'Item added successfully');\n            case 11:\n              closeModal();\n              fetchItems();\n              _context4.next = 19;\n              break;\n            case 15:\n              _context4.prev = 15;\n              _context4.t0 = _context4[\"catch\"](0);\n              console.error('Error submitting item:', _context4.t0);\n              showErrorAlert('Error', 'Failed to submit item');\n            case 19:\n            case \"end\":\n              return _context4.stop();\n          }\n        }, _callee4, null, [[0, 15]]);\n      }));\n      return function submitItem() {\n        return _ref5.apply(this, arguments);\n      };\n    }();\n    var uploadExcel = /*#__PURE__*/function () {\n      var _ref6 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(event) {\n        var file, formData;\n        return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n          while (1) switch (_context5.prev = _context5.next) {\n            case 0:\n              file = event.target.files[0];\n              if (file) {\n                _context5.next = 3;\n                break;\n              }\n              return _context5.abrupt(\"return\");\n            case 3:\n              formData = new FormData();\n              formData.append('file', file);\n              _context5.prev = 5;\n              _context5.next = 8;\n              return axios.post(\"\".concat(API_URL, \"/upload-excel\"), formData, {\n                headers: {\n                  'Content-Type': 'multipart/form-data'\n                }\n              });\n            case 8:\n              fetchItems();\n              showSuccessAlert('Success', 'Excel file uploaded successfully');\n              _context5.next = 16;\n              break;\n            case 12:\n              _context5.prev = 12;\n              _context5.t0 = _context5[\"catch\"](5);\n              console.error('Error uploading Excel file:', _context5.t0);\n              showErrorAlert('Error', 'Failed to upload Excel file');\n            case 16:\n            case \"end\":\n              return _context5.stop();\n          }\n        }, _callee5, null, [[5, 12]]);\n      }));\n      return function uploadExcel(_x) {\n        return _ref6.apply(this, arguments);\n      };\n    }();\n    var getCategoryName = function getCategoryName(categoryId) {\n      var category = categories.value.find(function (cat) {\n        return cat.id === categoryId;\n      });\n      return category ? category.name : 'Unknown';\n    };\n    var filteredItems = computed(function () {\n      var filtered = items.value;\n      if (searchQuery.value) {\n        var query = searchQuery.value.toLowerCase();\n        filtered = filtered.filter(function (item) {\n          return item.name.toLowerCase().includes(query) || item.description.toLowerCase().includes(query);\n        });\n      }\n      if (selectedCategory.value) {\n        filtered = filtered.filter(function (item) {\n          return item.category_id === parseInt(selectedCategory.value);\n        });\n      }\n      return filtered;\n    });\n    var viewItem = function viewItem(item) {\n      currentItem.value = _objectSpread({}, item);\n      showViewModal.value = true;\n    };\n    var closeViewModal = function closeViewModal() {\n      showViewModal.value = false;\n      currentItem.value = {};\n    };\n    var openReduceStockModal = function openReduceStockModal(item) {\n      openPasswordModal(item, 'reduce-stock'); // Pass 'reduce-stock' as the context\n    };\n    var closeReduceStockModal = function closeReduceStockModal() {\n      showReduceStockModal.value = false;\n      currentItem.value = {};\n      reduceQuantity.value = 0;\n      patientName.value = '';\n    };\n    var reduceStock = /*#__PURE__*/function () {\n      var _ref7 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n          while (1) switch (_context6.prev = _context6.next) {\n            case 0:\n              _context6.prev = 0;\n              _context6.next = 3;\n              return axios.post(\"\".concat(API_URL, \"/items/\").concat(currentItem.value.id, \"/reduce-stock\"), {\n                quantity: parseInt(reduceQuantity.value),\n                patientName: patientName.value\n              });\n            case 3:\n              response = _context6.sent;\n              if (response.data.success) {\n                showSuccessAlert('Success', 'Stock reduced successfully!');\n                closeReduceStockModal();\n                fetchItems();\n              } else {\n                showErrorAlert('Error', 'Failed to reduce stock. Please try again.');\n              }\n              _context6.next = 11;\n              break;\n            case 7:\n              _context6.prev = 7;\n              _context6.t0 = _context6[\"catch\"](0);\n              console.error('Error reducing stock:', _context6.t0);\n              showErrorAlert('Error', 'An error occurred while reducing stock.');\n            case 11:\n            case \"end\":\n              return _context6.stop();\n          }\n        }, _callee6, null, [[0, 7]]);\n      }));\n      return function reduceStock() {\n        return _ref7.apply(this, arguments);\n      };\n    }();\n    var openHistoryModal = /*#__PURE__*/function () {\n      var _ref8 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee7(item) {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee7$(_context7) {\n          while (1) switch (_context7.prev = _context7.next) {\n            case 0:\n              currentItem.value = _objectSpread({}, item);\n              showHistoryModal.value = true;\n              historyCurrentPage.value = 1;\n              _context7.prev = 3;\n              _context7.next = 6;\n              return axios.get(\"\".concat(API_URL, \"/items/\").concat(item.id, \"/history\"));\n            case 6:\n              response = _context7.sent;\n              if (response.data.success) {\n                itemHistory.value = response.data.data;\n              } else {\n                showErrorAlert('Error', 'Failed to fetch item history. Please try again.');\n              }\n              _context7.next = 14;\n              break;\n            case 10:\n              _context7.prev = 10;\n              _context7.t0 = _context7[\"catch\"](3);\n              console.error('Error fetching item history:', _context7.t0);\n              showErrorAlert('Error', 'An error occurred while fetching item history.');\n            case 14:\n            case \"end\":\n              return _context7.stop();\n          }\n        }, _callee7, null, [[3, 10]]);\n      }));\n      return function openHistoryModal(_x2) {\n        return _ref8.apply(this, arguments);\n      };\n    }();\n    var closeHistoryModal = function closeHistoryModal() {\n      showHistoryModal.value = false;\n      currentItem.value = {};\n      itemHistory.value = [];\n    };\n    var formatDate = function formatDate(dateString) {\n      if (!dateString) return 'N/A';\n      var options = {\n        year: 'numeric',\n        month: 'long',\n        day: 'numeric'\n      };\n      return new Date(dateString).toLocaleDateString(undefined, options);\n    };\n    var displayedHistoryPages = computed(function () {\n      var range = 2;\n      var start = Math.max(1, historyCurrentPage.value - range);\n      var end = Math.min(historyTotalPages.value, historyCurrentPage.value + range);\n      if (end - start + 1 < range * 2 + 1) {\n        if (start === 1) {\n          end = Math.min(start + range * 2, historyTotalPages.value);\n        } else {\n          start = Math.max(end - range * 2, 1);\n        }\n      }\n      return Array.from({\n        length: end - start + 1\n      }, function (_, i) {\n        return start + i;\n      });\n    });\n    var prevHistoryPage = function prevHistoryPage() {\n      if (historyCurrentPage.value > 1) {\n        historyCurrentPage.value--;\n      }\n    };\n    var nextHistoryPage = function nextHistoryPage() {\n      if (historyCurrentPage.value < historyTotalPages.value) {\n        historyCurrentPage.value++;\n      }\n    };\n    var goToHistoryPage = function goToHistoryPage(page) {\n      historyCurrentPage.value = page;\n    };\n\n    // SweetAlert functions\n    var showSuccessAlert = function showSuccessAlert(title, message) {\n      Swal.fire({\n        icon: 'success',\n        title: title,\n        text: message,\n        confirmButtonColor: '#3085d6'\n      });\n    };\n    var showErrorAlert = function showErrorAlert(title, message) {\n      Swal.fire({\n        icon: 'error',\n        title: title,\n        text: message,\n        confirmButtonColor: '#d33'\n      });\n    };\n    var __returned__ = {\n      API_URL: API_URL,\n      items: items,\n      categories: categories,\n      tableHeaders: tableHeaders,\n      searchQuery: searchQuery,\n      selectedCategory: selectedCategory,\n      showAddModal: showAddModal,\n      showViewModal: showViewModal,\n      showReduceStockModal: showReduceStockModal,\n      showHistoryModal: showHistoryModal,\n      showNewCategoryModal: showNewCategoryModal,\n      currentItem: currentItem,\n      reduceQuantity: reduceQuantity,\n      patientName: patientName,\n      itemHistory: itemHistory,\n      newCategory: newCategory,\n      showPasswordModal: showPasswordModal,\n      enteredPassword: enteredPassword,\n      correctPassword: correctPassword,\n      validatePassword: validatePassword,\n      modalContext: modalContext,\n      openPasswordModal: openPasswordModal,\n      closePasswordModal: closePasswordModal,\n      historyItemsPerPage: historyItemsPerPage,\n      historyCurrentPage: historyCurrentPage,\n      historyTotalPages: historyTotalPages,\n      historyPaginationStart: historyPaginationStart,\n      historyPaginationEnd: historyPaginationEnd,\n      paginatedHistory: paginatedHistory,\n      editingItem: editingItem,\n      itemsPerPage: itemsPerPage,\n      currentPage: currentPage,\n      totalItems: totalItems,\n      totalPages: totalPages,\n      paginationStart: paginationStart,\n      paginationEnd: paginationEnd,\n      displayedPages: displayedPages,\n      handleCategoryChange: handleCategoryChange,\n      closeNewCategoryModal: closeNewCategoryModal,\n      submitNewCategory: submitNewCategory,\n      fetchCategories: fetchCategories,\n      debouncedFetchItems: debouncedFetchItems,\n      fetchItems: fetchItems,\n      prevPage: prevPage,\n      nextPage: nextPage,\n      goToPage: goToPage,\n      editItem: editItem,\n      closeModal: closeModal,\n      submitItem: submitItem,\n      uploadExcel: uploadExcel,\n      getCategoryName: getCategoryName,\n      filteredItems: filteredItems,\n      viewItem: viewItem,\n      closeViewModal: closeViewModal,\n      openReduceStockModal: openReduceStockModal,\n      closeReduceStockModal: closeReduceStockModal,\n      reduceStock: reduceStock,\n      openHistoryModal: openHistoryModal,\n      closeHistoryModal: closeHistoryModal,\n      formatDate: formatDate,\n      displayedHistoryPages: displayedHistoryPages,\n      prevHistoryPage: prevHistoryPage,\n      nextHistoryPage: nextHistoryPage,\n      goToHistoryPage: goToHistoryPage,\n      showSuccessAlert: showSuccessAlert,\n      showErrorAlert: showErrorAlert,\n      ref: ref,\n      computed: computed,\n      onMounted: onMounted,\n      watch: watch,\n      get PlusIcon() {\n        return PlusIcon;\n      },\n      get UploadIcon() {\n        return UploadIcon;\n      },\n      get EditIcon() {\n        return EditIcon;\n      },\n      get SearchIcon() {\n        return SearchIcon;\n      },\n      get ChevronLeftIcon() {\n        return ChevronLeftIcon;\n      },\n      get ChevronRightIcon() {\n        return ChevronRightIcon;\n      },\n      get EyeIcon() {\n        return EyeIcon;\n      },\n      get PackageOpenIcon() {\n        return PackageOpenIcon;\n      },\n      get HistoryIcon() {\n        return HistoryIcon;\n      },\n      get axios() {\n        return axios;\n      },\n      get debounce() {\n        return debounce;\n      },\n      get Swal() {\n        return Swal;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","computed","onMounted","watch","PlusIcon","UploadIcon","EditIcon","SearchIcon","ChevronLeftIcon","ChevronRightIcon","EyeIcon","PackageOpenIcon","HistoryIcon","axios","debounce","Swal","API_URL","correctPassword","historyItemsPerPage","itemsPerPage","items","categories","tableHeaders","searchQuery","selectedCategory","showAddModal","showViewModal","showReduceStockModal","showHistoryModal","showNewCategoryModal","currentItem","reduceQuantity","patientName","itemHistory","newCategory","name","description","showPasswordModal","enteredPassword","validatePassword","value","modalContext","showErrorAlert","openPasswordModal","item","context","_objectSpread","closePasswordModal","historyCurrentPage","historyTotalPages","Math","ceil","length","historyPaginationStart","max","historyPaginationEnd","min","paginatedHistory","start","end","slice","editingItem","currentPage","totalItems","totalPages","paginationStart","paginationEnd","displayedPages","range","Array","from","_","i","category_id","newValue","handleCategoryChange","event","target","fetchItems","closeNewCategoryModal","submitNewCategory","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","newCat","wrap","_callee$","_context","prev","next","post","concat","sent","data","success","push","id","showSuccessAlert","t0","console","error","stop","apply","arguments","fetchCategories","_ref3","_callee2","_callee2$","_context2","get","debouncedFetchItems","_ref4","_callee3","_callee3$","_context3","params","page","limit","search","category","total_count","prevPage","nextPage","goToPage","editItem","closeModal","quantity_in_stock","min_stock_level","reorder_level","submitItem","_ref5","_callee4","itemData","_callee4$","_context4","parseInt","put","uploadExcel","_ref6","_callee5","file","formData","_callee5$","_context5","files","abrupt","FormData","append","headers","_x","getCategoryName","categoryId","find","cat","filteredItems","filtered","query","toLowerCase","filter","includes","viewItem","closeViewModal","openReduceStockModal","closeReduceStockModal","reduceStock","_ref7","_callee6","_callee6$","_context6","quantity","openHistoryModal","_ref8","_callee7","_callee7$","_context7","_x2","closeHistoryModal","formatDate","dateString","options","year","month","day","Date","toLocaleDateString","undefined","displayedHistoryPages","prevHistoryPage","nextHistoryPage","goToHistoryPage","title","message","fire","icon","text","confirmButtonColor"],"sources":["C:/Users/Lenovo Pc/OneDrive - Department of Education/Desktop/MCDL-MINSU-CLINIC/Inventory-Clinic-MCC/frontend/src/views/Inventory.vue"],"sourcesContent":["<template>\r\n  <div class=\"min-h-screen bg-gray-100\">\r\n    <div class=\"container mx-auto px-4 py-8\">\r\n      <h1 class=\"text-3xl font-bold text-gray-800 mb-2\">Inventory Management</h1>\r\n      <p class=\"text-gray-600 mb-8\">Manage your inventory items, track stock levels, and maintain product information.</p>\r\n      \r\n      <div class=\"bg-white rounded-lg shadow-md p-6 mb-8\">\r\n        <div class=\"flex flex-col md:flex-row justify-between items-center mb-6\">\r\n          <div class=\"flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4 mb-4 md:mb-0\">\r\n            <button @click=\"showAddModal = true\" class=\"btn-primary\">\r\n              <PlusIcon class=\"w-5 h-5 mr-2\" />\r\n              Add Item\r\n            </button>\r\n            <label class=\"btn-secondary\">\r\n              <UploadIcon class=\"w-5 h-5 mr-2\" />\r\n              Upload Excel\r\n              <input type=\"file\" class=\"hidden\" @change=\"uploadExcel\" accept=\".xlsx, .xls\" />\r\n            </label>\r\n          </div>\r\n          <div class=\"flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4 w-full md:w-auto\">\r\n            <div class=\"relative\">\r\n              <input \r\n                v-model=\"searchQuery\" \r\n                type=\"text\" \r\n                placeholder=\"Search items...\" \r\n                class=\"pl-10 pr-4 py-2 w-full sm:w-64 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n              />\r\n              <SearchIcon class=\"absolute left-3 top-2.5 text-gray-400 w-5 h-5\" />\r\n            </div>\r\n            <select \r\n              v-model=\"selectedCategory\" \r\n              class=\"w-full sm:w-auto border rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n              @change=\"handleCategoryChange\"\r\n            >\r\n              <option value=\"\">All Categories</option>\r\n              <option v-for=\"category in categories\" :key=\"category.id\" :value=\"category.id\">\r\n                {{ category.name }}\r\n              </option>\r\n              <option value=\"new\">+ Add New Category</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- New Category Modal -->\r\n        <Teleport to=\"body\">\r\n          <div v-if=\"showNewCategoryModal\" class=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4\" style=\"z-index: 100;\">\r\n            <div class=\"bg-white rounded-lg shadow-xl w-full max-w-md p-6\">\r\n              <h3 class=\"text-xl font-bold mb-4\">Add New Category</h3>\r\n              <form @submit.prevent=\"submitNewCategory\">\r\n                <div class=\"space-y-4\">\r\n                  <div>\r\n                    <label for=\"categoryName\" class=\"block text-sm font-medium text-gray-700\">Category Name</label>\r\n                    <input \r\n                      type=\"text\" \r\n                      id=\"categoryName\" \r\n                      v-model=\"newCategory.name\" \r\n                      required \r\n                      class=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-500 focus:ring-opacity-50\"\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <label for=\"categoryDescription\" class=\"block text-sm font-medium text-gray-700\">Description</label>\r\n                    <textarea \r\n                      id=\"categoryDescription\" \r\n                      v-model=\"newCategory.description\" \r\n                      rows=\"3\" \r\n                      class=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-500 focus:ring-opacity-50\"\r\n                    ></textarea>\r\n                  </div>\r\n                  <div class=\"flex justify-end space-x-3\">\r\n                    <button type=\"button\" @click=\"closeNewCategoryModal\" class=\"btn-secondary\">\r\n                      Cancel\r\n                    </button>\r\n                    <button type=\"submit\" class=\"btn-primary\">\r\n                      Add Category\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        </Teleport>\r\n      </div>\r\n\r\n      <div class=\"bg-white rounded-lg shadow-md overflow-hidden\">\r\n        <div class=\"overflow-x-auto\">\r\n          <table class=\"min-w-full divide-y divide-gray-200\">\r\n            <thead class=\"bg-gray-50\">\r\n              <tr>\r\n                <th v-for=\"header in tableHeaders\" :key=\"header\" class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                  {{ header }}\r\n                </th>\r\n                <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                  Actions\r\n                </th>\r\n              </tr>\r\n            </thead>\r\n            <tbody class=\"bg-white divide-y divide-gray-200\">\r\n              <tr v-for=\"item in filteredItems\" :key=\"item.id\" class=\"hover:bg-gray-50\">\r\n                <td class=\"px-6 py-4 whitespace-nowrap\">{{ item.name }}</td>\r\n                <td class=\"px-6 py-4 whitespace-nowrap\">{{ item.description }}</td>\r\n                <td class=\"px-6 py-4 whitespace-nowrap\">{{ getCategoryName(item.category_id) }}</td>\r\n                <td class=\"px-6 py-4 whitespace-nowrap\">\r\n                  {{ item.quantity_in_stock === 0 ? 'Out of Stock' : item.quantity_in_stock }}\r\n                </td>\r\n                <td class=\"px-6 py-4 whitespace-nowrap\">{{ item.min_stock_level }}</td>\r\n                <td class=\"px-6 py-4 whitespace-nowrap\">{{ item.reorder_level }}</td>\r\n                <td class=\"px-6 py-4 whitespace-nowrap space-x-2\">\r\n                  <button @click=\"viewItem(item)\" class=\"text-blue-600 hover:text-blue-900\" title=\"View Item\">\r\n                    <EyeIcon class=\"w-5 h-5\" />\r\n                  </button>\r\n                  <button @click=\"editItem(item)\" class=\"text-blue-600 hover:text-blue-900\" title=\"Edit Item\">\r\n                    <EditIcon class=\"w-5 h-5\" />\r\n                  </button>\r\n                  <button @click=\"openReduceStockModal(item)\" class=\"text-red-600 hover:text-red-900\" title=\"Disburse Item\">\r\n                    <PackageOpenIcon class=\"w-5 h-5\" />\r\n                  </button>\r\n                  <button @click=\"openHistoryModal(item)\" class=\"text-green-600 hover:text-green-900\" title=\"View History\">\r\n                    <HistoryIcon class=\"w-5 h-5\" />\r\n                  </button>\r\n                </td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Pagination -->\r\n      <div class=\"mt-6 flex justify-between items-center\">\r\n        <div class=\"text-sm text-gray-700\">\r\n          Showing {{ paginationStart }} to {{ paginationEnd }} of {{ totalItems }} entries\r\n        </div>\r\n        <div class=\"flex space-x-2\">\r\n          <button \r\n            @click=\"prevPage\" \r\n            :disabled=\"currentPage === 1\" \r\n            class=\"btn-secondary px-3 py-1 disabled:opacity-50\"\r\n          >\r\n            <ChevronLeftIcon class=\"w-5 h-5\" />\r\n          </button>\r\n          <button \r\n            v-for=\"page in displayedPages\" \r\n            :key=\"page\" \r\n            @click=\"goToPage(page)\" \r\n            :class=\"['btn-secondary px-3 py-1', currentPage === page ? 'bg-blue-600 text-white' : '']\"\r\n          >\r\n            {{ page }}\r\n          </button>\r\n          <button \r\n            @click=\"nextPage\" \r\n            :disabled=\"currentPage === totalPages\" \r\n            class=\"btn-secondary px-3 py-1 disabled:opacity-50\"\r\n          >\r\n            <ChevronRightIcon class=\"w-5 h-5\" />\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <div v-if=\"showViewModal\" class=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 overflow-y-auto\">\r\n        <div class=\"bg-white rounded-lg shadow-xl w-full max-w-4xl\">\r\n          <div class=\"p-6\">\r\n            <h2 class=\"text-2xl font-bold mb-4\">View Item</h2>\r\n            <div class=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n              <div class=\"space-y-4\">\r\n                <div>\r\n                  <span class=\"font-medium text-gray-600 pr-4\">Name:</span> \r\n                  <span class=\"text-gray-800\">{{ currentItem.name }}</span>\r\n                </div>\r\n                <div>\r\n                  <span class=\"font-medium text-gray-600 pr-4\">Description:</span> \r\n                  <span class=\"text-gray-800\">{{ currentItem.description }}</span>\r\n                </div>\r\n                <div>\r\n                  <span class=\"font-medium text-gray-600 pr-4\">Category:</span> \r\n                  <span class=\"text-gray-800\">{{ getCategoryName(currentItem.category_id) }}</span>\r\n                </div>\r\n                <div>\r\n                  <span class=\"font-medium text-gray-600 pr-4\">Quantity in Stock:</span> \r\n                  <span class=\"text-gray-800\">{{ currentItem.quantity_in_stock }}</span>\r\n                </div>\r\n                <div>\r\n                  <span class=\"font-medium text-gray-600 pr-4\">Min Stock Level:</span> \r\n                  <span class=\"text-gray-800\">{{ currentItem.min_stock_level }}</span>\r\n                </div>\r\n                <div>\r\n                  <span class=\"font-medium text-gray-600 pr-4\">Reorder Level:</span> \r\n                  <span class=\"text-gray-800\">{{ currentItem.reorder_level }}</span>\r\n                </div>\r\n              </div>\r\n\r\n              <!-- New Batch Information Section -->\r\n              <div class=\"space-y-4\">\r\n                <h3 class=\"text-lg font-semibold mb-2\">Batch Information</h3>\r\n                <div class=\"border border-gray-200 rounded-lg shadow-sm\">\r\n                  <div class=\"max-h-96 overflow-y-auto\">\r\n                    <table class=\"min-w-full divide-y divide-gray-200\">\r\n                      <thead class=\"bg-gray-50 sticky top-0\">\r\n                        <tr>\r\n                          <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Batch Number</th>\r\n                          <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Quantity</th>\r\n                          <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Expiry Date</th>\r\n                          <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Received Date</th>\r\n                          <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Supplier</th>\r\n                        </tr>\r\n                      </thead>\r\n                      <tbody class=\"bg-white divide-y divide-gray-200\">\r\n                        <tr v-for=\"batch in currentItem.batches\" :key=\"batch.id\" class=\"hover:bg-gray-50\">\r\n                          <td class=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">{{ batch.batch_number }}</td>\r\n                          <td class=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">{{ batch.quantity }}</td>\r\n                          <td class=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">{{ formatDate(batch.expiry_date) }}</td>\r\n                          <td class=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">{{ formatDate(batch.received_date) }}</td>\r\n                          <td class=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">{{ batch.supplier }}</td>\r\n                        </tr>\r\n                      </tbody>\r\n                    </table>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"mt-6 flex justify-end\">\r\n              <button @click=\"closeViewModal\" class=\"btn-secondary\">Close</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n      <!--password in modal-->\r\n      <div v-if=\"showPasswordModal\" class=\"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50\">\r\n      <div class=\"bg-white rounded-lg shadow-lg p-6 w-full max-w-sm\">\r\n      <h2 class=\"text-xl font-bold text-gray-700 mb-4 text-center\">Authorized Person Only</h2> <br>\r\n      <input\r\n        type=\"password\"\r\n        v-model=\"enteredPassword\"\r\n        placeholder=\"Enter your password\"\r\n        class=\"w-full border border-gray-300 rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\"/>\r\n      <div class=\"mt-4 flex justify-end space-x-2\">\r\n      <button\r\n        @click=\"validatePassword\"\r\n        class=\"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-md transition\">Submit\r\n      </button>\r\n      <button\r\n      @click=\"closePasswordModal\"\r\n      class=\"bg-gray-300 hover:bg-gray-400 text-gray-700 px-4 py-2 rounded-md transition\">Cancel\r\n      </button>\r\n      </div>\r\n      </div>\r\n      </div>\r\n\r\n      <!-- Add/Edit Item Modal -->\r\n      <div v-if=\"showAddModal\" class=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4\">\r\n        <div class=\"bg-white rounded-lg shadow-xl w-full max-w-md\">\r\n          <div class=\"p-6\">\r\n            <h2 class=\"text-2xl font-bold mb-4\">{{ editingItem ? 'Edit' : 'Add New' }} Item</h2>\r\n            <form @submit.prevent=\"submitItem\">\r\n              <div class=\"space-y-4\">\r\n                <div>\r\n                  <label for=\"name\" class=\"block text-sm font-medium text-gray-700\">Name</label>\r\n                  <input type=\"text\" id=\"name\" v-model=\"currentItem.name\" required class=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-500 focus:ring-opacity-50\">\r\n                </div>\r\n                <div>\r\n                  <label for=\"description\" class=\"block text-sm font-medium text-gray-700\">Description</label>\r\n                  <textarea id=\"description\" v-model=\"currentItem.description\" rows=\"3\" class=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-500 focus:ring-opacity-50\"></textarea>\r\n                </div>\r\n                <div>\r\n                  <label for=\"category\" class=\"block text-sm font-medium text-gray-700\">Category</label>\r\n                  <select id=\"category\" v-model=\"currentItem.category_id\" required class=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-500 focus:ring-opacity-50\">\r\n                    <option v-for=\"category in categories\" :key=\"category.id\" :value=\"category.id\">{{ category.name }}</option>\r\n                  </select>\r\n                </div>\r\n                <div>\r\n                  <label for=\"minStockLevel\" class=\"block text-sm font-medium text-gray-700\">Min Stock Level</label>\r\n                  <input type=\"number\" id=\"minStockLevel\" v-model=\"currentItem.min_stock_level\" required min=\"0\" class=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-500 focus:ring-opacity-50\">\r\n                </div>\r\n                <div>\r\n                  <label for=\"reorderLevel\" class=\"block text-sm font-medium text-gray-700\">Reorder Level</label>\r\n                  <input type=\"number\" id=\"reorderLevel\" v-model=\"currentItem.reorder_level\" required min=\"0\" class=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-500 focus:ring-opacity-50\">\r\n                </div>\r\n              </div>\r\n              <div class=\"mt-6 flex justify-end space-x-3\">\r\n                <button type=\"button\" @click=\"closeModal\" class=\"btn-secondary\">Cancel</button>\r\n                <button type=\"submit\" class=\"btn-primary\">{{ editingItem ? 'Update' : 'Add' }} Item</button>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div v-if=\"showReduceStockModal\" class=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4\">\r\n        <div class=\"bg-white rounded-lg shadow-xl w-full max-w-md\">\r\n          <div class=\"p-6\">\r\n            <h2 class=\"text-2xl font-bold mb-4\">Disburse Item</h2>\r\n            <form @submit.prevent=\"reduceStock\">\r\n              <div class=\"space-y-4\">\r\n                <div>\r\n                  <label for=\"reduceQuantity\" class=\"block text-sm font-medium text-gray-700\">Quantity to Disburse</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    id=\"reduceQuantity\"\r\n                    v-model=\"reduceQuantity\"\r\n                    required\r\n                    min=\"1\"\r\n                    :max=\"currentItem.quantity_in_stock\"\r\n                    class=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-500 focus:ring-opacity-50\"\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <label for=\"patientName\" class=\"block text-sm font-medium text-gray-700\">Patient Name</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    id=\"patientName\"\r\n                    v-model=\"patientName\"\r\n                    required\r\n                    class=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-500 focus:ring-opacity-50\"\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div class=\"mt-6 flex justify-end space-x-3\">\r\n                <button type=\"button\" @click=\"closeReduceStockModal\" class=\"btn-secondary\">Cancel</button>\r\n                <button type=\"submit\" class=\"btn-primary\">Disburse</button>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- History Modal -->\r\n      <div v-if=\"showHistoryModal\" class=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 overflow-y-auto\">\r\n        <div class=\"bg-white rounded-lg shadow-xl w-full max-w-4xl my-8\">\r\n          <div class=\"p-6\">\r\n            <h2 class=\"text-2xl font-bold mb-4\">Disbursement History for {{ currentItem.name }}</h2>\r\n            <div class=\"overflow-x-auto\">\r\n              <table class=\"min-w-full divide-y divide-gray-200\">\r\n                <thead class=\"bg-gray-50\">\r\n                  <tr>\r\n                    <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Date</th>\r\n                    <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Patient Name</th>\r\n                    <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Quantity Disbursed</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody class=\"bg-white divide-y divide-gray-200\">\r\n                  <tr v-for=\"transaction in paginatedHistory\" :key=\"transaction.id\" class=\"hover:bg-gray-50\">\r\n                    <td class=\"px-6 py-4 whitespace-nowrap\">{{ formatDate(transaction.date) }}</td>\r\n                    <td class=\"px-6 py-4 whitespace-nowrap\">{{ transaction.patient_name }}</td>\r\n                    <td class=\"px-6 py-4 whitespace-nowrap\">{{ transaction.quantity_change }}</td>\r\n                  </tr>\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n            <!-- Pagination for History -->\r\n            <div class=\"mt-4 flex justify-between items-center\">\r\n              <div class=\"text-sm text-gray-700\">\r\n                Showing {{ historyPaginationStart }} to {{ historyPaginationEnd }} of {{ itemHistory.length }} entries\r\n              </div>\r\n              <div class=\"flex space-x-2\">\r\n                <button \r\n                  @click=\"prevHistoryPage\" \r\n                  :disabled=\"historyCurrentPage === 1\" \r\n                  class=\"btn-secondary px-3 py-1 disabled:opacity-50\"\r\n                >\r\n                  <ChevronLeftIcon class=\"w-5 h-5\" />\r\n                </button>\r\n                <button \r\n                  v-for=\"page in displayedHistoryPages\" \r\n                  :key=\"page\" \r\n                  @click=\"goToHistoryPage(page)\" \r\n                  :class=\"['btn-secondary px-3 py-1', historyCurrentPage === page ? 'bg-blue-600 text-white' : '']\"\r\n                >\r\n                  {{ page }}\r\n                </button>\r\n                <button \r\n                  @click=\"nextHistoryPage\" \r\n                  :disabled=\"historyCurrentPage === historyTotalPages\" \r\n                  class=\"btn-secondary px-3 py-1 disabled:opacity-50\"\r\n                >\r\n                  <ChevronRightIcon class=\"w-5 h-5\" />\r\n                </button>\r\n              </div>\r\n            </div>\r\n            <div class=\"mt-6 flex justify-end\">\r\n              <button @click=\"closeHistoryModal\" class=\"btn-secondary\">Close</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, onMounted, watch } from 'vue'\r\nimport { PlusIcon, UploadIcon, EditIcon, SearchIcon, ChevronLeftIcon, ChevronRightIcon, EyeIcon, PackageOpenIcon, HistoryIcon } from 'lucide-vue-next'\r\nimport axios from 'axios'\r\nimport debounce from 'lodash/debounce'\r\nimport Swal from 'sweetalert2'\r\n\r\nconst API_URL = 'http://localhost:5000/api/inventory' // Replace with your actual API URL\r\n\r\nconst items = ref([])\r\nconst categories = ref([])\r\nconst tableHeaders = ['Name', 'Description', 'Category', 'Quantity in Stock', 'Min Stock Level', 'Reorder Level']\r\n\r\nconst searchQuery = ref('')\r\nconst selectedCategory = ref('')\r\nconst showAddModal = ref(false)\r\nconst showViewModal = ref(false)\r\nconst showReduceStockModal = ref(false)\r\nconst showHistoryModal = ref(false)\r\nconst showNewCategoryModal = ref(false)\r\nconst currentItem = ref({})\r\nconst reduceQuantity = ref(0)\r\nconst patientName = ref('')\r\nconst itemHistory = ref([])\r\nconst newCategory = ref({\r\n  name: '',\r\n  description: ''\r\n})\r\nconst showPasswordModal = ref(false)\r\nconst enteredPassword = ref('')\r\nconst correctPassword = 'asd' // Replace with your actual password or retrieve it securely.\r\n\r\nconst validatePassword = () => {\r\n  if (enteredPassword.value === correctPassword) {\r\n    showPasswordModal.value = false\r\n    enteredPassword.value = ''\r\n\r\n    if (modalContext.value === 'edit-item') {\r\n      showAddModal.value = true // Open the edit item modal\r\n    } else if (modalContext.value === 'reduce-stock') {\r\n      showReduceStockModal.value = true // Open the reduce stock modal\r\n    }\r\n\r\n    modalContext.value = '' // Reset context after use\r\n  } else {\r\n    showErrorAlert('Invalid Password', 'The password you entered is incorrect.')\r\n  }\r\n}\r\nconst modalContext = ref('') // Tracks the context for the password modal\r\n\r\nconst openPasswordModal = (item, context) => {\r\n  currentItem.value = { ...item } // Store the item being acted upon\r\n  modalContext.value = context   // Set the context ('edit-item' or 'reduce-stock')\r\n  showPasswordModal.value = true\r\n  \r\n}\r\nconst closePasswordModal = () => {\r\n  showPasswordModal.value = false\r\n  enteredPassword.value = '' // Clear password input\r\n  modalContext.value = ''    // Reset context\r\n}\r\nconst historyItemsPerPage = 10\r\nconst historyCurrentPage = ref(1)\r\nconst historyTotalPages = computed(() => Math.ceil(itemHistory.value.length / historyItemsPerPage))\r\n\r\nconst historyPaginationStart = computed(() => Math.max((historyCurrentPage.value - 1) * historyItemsPerPage + 1, 0))\r\nconst historyPaginationEnd = computed(() => Math.min(historyCurrentPage.value * historyItemsPerPage, itemHistory.value.length))\r\n\r\nconst paginatedHistory = computed(() => {\r\n  const start = (historyCurrentPage.value - 1) * historyItemsPerPage\r\n  const end = start + historyItemsPerPage\r\n  return itemHistory.value.slice(start, end)\r\n})\r\n  \r\nconst editingItem = ref(null)\r\n\r\n// Pagination\r\nconst itemsPerPage = 10\r\nconst currentPage = ref(1)\r\nconst totalItems = ref(0)\r\nconst totalPages = computed(() => Math.ceil(totalItems.value / itemsPerPage))\r\n\r\nconst paginationStart = computed(() => Math.max((currentPage.value - 1) * itemsPerPage + 1, 0))\r\nconst paginationEnd = computed(() => Math.min(currentPage.value * itemsPerPage, totalItems.value))\r\n\r\nconst displayedPages = computed(() => {\r\n  const range = 2\r\n  let start = Math.max(1, currentPage.value - range)\r\n  let end = Math.min(totalPages.value, currentPage.value + range)\r\n\r\n  if (end - start + 1 < range * 2 + 1) {\r\n    if (start === 1) {\r\n      end = Math.min(start + range * 2, totalPages.value)\r\n    } else {\r\n      start = Math.max(end - range * 2, 1)\r\n    }\r\n  }\r\n\r\n  return Array.from({ length: end - start + 1 }, (_, i) => start + i)\r\n})\r\n\r\n// Watch for category selection\r\nwatch(() => currentItem.value.category_id, (newValue) => {\r\n  if (newValue === 'new') {\r\n    showNewCategoryModal.value = true\r\n    currentItem.value.category_id = '' // Reset selection\r\n  }\r\n})\r\n\r\n// Add new method to handle category changes\r\nconst handleCategoryChange = (event) => {\r\n  const value = event.target.value\r\n  if (value === 'new') {\r\n    showNewCategoryModal.value = true\r\n    // Store the previous selection\r\n    selectedCategory.value = ''\r\n  } else {\r\n    fetchItems()\r\n  }\r\n}\r\n\r\n// Add new methods for category management\r\nconst closeNewCategoryModal = () => {\r\n  showNewCategoryModal.value = false\r\n  newCategory.value = {\r\n    name: '',\r\n    description: ''\r\n  }\r\n}\r\n\r\n// Update submitNewCategory to handle both contexts\r\nconst submitNewCategory = async () => {\r\n  try {\r\n    const response = await axios.post(`${API_URL}/categories`, newCategory.value)\r\n    if (response.data.success) {\r\n      const newCat = response.data.data\r\n      // Add the new category to the categories list\r\n      categories.value.push(newCat)\r\n      \r\n      // If adding from the item modal, select the new category\r\n      if (showAddModal.value) {\r\n        currentItem.value.category_id = newCat.id\r\n      }\r\n      \r\n      // Close the modal and reset form\r\n      closeNewCategoryModal()\r\n      // Fetch items to refresh the list\r\n      fetchItems()\r\n      showSuccessAlert('Success', 'New category added successfully')\r\n    }\r\n  } catch (error) {\r\n    console.error('Error creating category:', error)\r\n    showErrorAlert('Error', 'Failed to create new category')\r\n  }\r\n}\r\n\r\nonMounted(() => {\r\n  fetchCategories()\r\n  fetchItems()\r\n})\r\n\r\nconst fetchCategories = async () => {\r\n  try {\r\n    const response = await axios.get(`${API_URL}/categories`)\r\n    categories.value = response.data.data\r\n  } catch (error) {\r\n    console.error('Error fetching categories:', error)\r\n    showErrorAlert('Error', 'Failed to fetch categories')\r\n  }\r\n}\r\n\r\nconst debouncedFetchItems = debounce(() => {\r\n  fetchItems()\r\n}, 300)\r\n\r\nwatch(searchQuery, () => {\r\n  debouncedFetchItems()\r\n})\r\n\r\nwatch(selectedCategory, () => {\r\n  fetchItems()\r\n})\r\n\r\nconst fetchItems = async () => {\r\n  try {\r\n    const response = await axios.get(`${API_URL}/items`, {\r\n      params: {\r\n        page: currentPage.value,\r\n        limit: itemsPerPage,\r\n        search: searchQuery.value,\r\n        category: selectedCategory.value\r\n      }\r\n    })\r\n    if (response.data.success) {\r\n      items.value = response.data.data || []\r\n      totalItems.value = response.data.total_count || 0\r\n      if (currentPage.value > totalPages.value) {\r\n        currentPage.value = 1\r\n      }\r\n    } else {\r\n      showErrorAlert('Error', 'Failed to fetch items')\r\n    }\r\n  } catch (error) {\r\n    console.error('Error fetching items:', error)\r\n    showErrorAlert('Error', 'Failed to fetch items')\r\n  }\r\n}\r\n\r\nconst prevPage = () => {\r\n  if (currentPage.value > 1) {\r\n    currentPage.value--\r\n    fetchItems()\r\n  }\r\n}\r\n\r\nconst nextPage = () => {\r\n  if (currentPage.value < totalPages.value) {\r\n    currentPage.value++\r\n    fetchItems()\r\n  }\r\n}\r\n\r\nconst goToPage = (page) => {\r\n  currentPage.value = page\r\n  fetchItems()\r\n}\r\n\r\nconst editItem = (item) => {\r\n  // editingItem.value = item\r\n  // currentItem.value = { ...item }\r\n  // showAddModal.value = true\r\n  openPasswordModal(item, 'edit-item')\r\n}\r\n\r\nconst closeModal = () => {\r\n  showAddModal.value = false\r\n  editingItem.value = null\r\n  currentItem.value = {\r\n    name: '',\r\n    description: '',\r\n    category_id: null,\r\n    quantity_in_stock: 0,\r\n    min_stock_level: 0,\r\n    reorder_level: 0\r\n  }\r\n}\r\n\r\nconst submitItem = async () => {\r\n  try {\r\n    const itemData = {\r\n      name: currentItem.value.name,\r\n      description: currentItem.value.description,\r\n      category_id: parseInt(currentItem.value.category_id),\r\n      quantity_in_stock: parseInt(currentItem.value.quantity_in_stock),\r\n      min_stock_level: parseInt(currentItem.value.min_stock_level),\r\n      reorder_level: parseInt(currentItem.value.reorder_level)\r\n    }\r\n\r\n    if (editingItem.value) {\r\n      await axios.put(`${API_URL}/items/${editingItem.value.id}`, itemData)\r\n      showSuccessAlert('Success', 'Item updated successfully')\r\n    } else {\r\n      await axios.post(`${API_URL}/items`, itemData)\r\n      showSuccessAlert('Success', 'Item added successfully')\r\n    }\r\n    closeModal()\r\n    fetchItems()\r\n  } catch (error) {\r\n    console.error('Error submitting item:', error)\r\n    showErrorAlert('Error', 'Failed to submit item')\r\n  }\r\n}\r\n\r\nconst uploadExcel = async (event) => {\r\n  const file = event.target.files[0]\r\n  if (!file) return\r\n\r\n  const formData = new FormData()\r\n  formData.append('file', file)\r\n\r\n  try {\r\n    await axios.post(`${API_URL}/upload-excel`, formData, {\r\n      headers: {\r\n        'Content-Type': 'multipart/form-data'\r\n      }\r\n    })\r\n    fetchItems()\r\n    showSuccessAlert('Success', 'Excel file uploaded successfully')\r\n  } catch (error) {\r\n    console.error('Error uploading Excel file:', error)\r\n    showErrorAlert('Error', 'Failed to upload Excel file')\r\n  }\r\n}\r\n\r\nconst getCategoryName = (categoryId) => {\r\n  const category = categories.value.find(cat => cat.id === categoryId)\r\n  return category ? category.name : 'Unknown'\r\n}\r\n\r\nconst filteredItems = computed(() => {\r\n  let filtered = items.value\r\n  if (searchQuery.value) {\r\n    const query = searchQuery.value.toLowerCase()\r\n    filtered = filtered.filter(item => \r\n      item.name.toLowerCase().includes(query) ||\r\n      item.description.toLowerCase().includes(query)\r\n    )\r\n  }\r\n  if (selectedCategory.value) {\r\n    filtered = filtered.filter(item => item.category_id === parseInt(selectedCategory.value))\r\n  }\r\n  return filtered\r\n})\r\n\r\nconst viewItem = (item) => {\r\n  currentItem.value = { ...item }\r\n  showViewModal.value = true\r\n}\r\n\r\nconst closeViewModal = () => {\r\n  showViewModal.value = false\r\n  currentItem.value = {}\r\n}\r\n\r\nconst openReduceStockModal = (item) => {\r\n  openPasswordModal(item, 'reduce-stock') // Pass 'reduce-stock' as the context\r\n}\r\n\r\nconst closeReduceStockModal = () => {\r\n  showReduceStockModal.value = false\r\n  currentItem.value = {}\r\n  reduceQuantity.value = 0\r\n  patientName.value = ''\r\n}\r\n\r\nconst reduceStock = async () => {\r\n  try {\r\n    const response = await axios.post(`${API_URL}/items/${currentItem.value.id}/reduce-stock`, {\r\n      quantity: parseInt(reduceQuantity.value),\r\n      patientName: patientName.value\r\n    })\r\n\r\n    if (response.data.success) {\r\n      showSuccessAlert('Success', 'Stock reduced successfully!')\r\n      closeReduceStockModal()\r\n      fetchItems()\r\n    } else {\r\n      showErrorAlert('Error', 'Failed to reduce stock. Please try again.')\r\n    }\r\n  } catch (error) {\r\n    console.error('Error reducing stock:', error)\r\n    showErrorAlert('Error', 'An error occurred while reducing stock.')\r\n  }\r\n}\r\n\r\nconst openHistoryModal = async (item) => {\r\n  currentItem.value = { ...item }\r\n  showHistoryModal.value = true\r\n  historyCurrentPage.value = 1\r\n  try {\r\n    const response = await axios.get(`${API_URL}/items/${item.id}/history`)\r\n    if (response.data.success) {\r\n      itemHistory.value = response.data.data\r\n    } else {\r\n      showErrorAlert('Error', 'Failed to fetch item history. Please try again.')\r\n    }\r\n  } catch (error) {\r\n    console.error('Error fetching item history:', error)\r\n    showErrorAlert('Error', 'An error occurred while fetching item history.')\r\n  }\r\n}\r\n\r\nconst closeHistoryModal = () => {\r\n  showHistoryModal.value = false\r\n  currentItem.value = {}\r\n  itemHistory.value = []\r\n}\r\n\r\nconst formatDate = (dateString) => {\r\n  if (!dateString) return 'N/A';\r\n  const options = { year: 'numeric', month: 'long', day: 'numeric' };\r\n  return new Date(dateString).toLocaleDateString(undefined, options);\r\n}\r\n\r\nconst displayedHistoryPages = computed(() => {\r\n  const range = 2\r\n  let start = Math.max(1, historyCurrentPage.value - range)\r\n  let end = Math.min(historyTotalPages.value, historyCurrentPage.value + range)\r\n\r\n  if (end - start + 1 < range * 2 + 1) {\r\n    if (start === 1) {\r\n      end = Math.min(start + range * 2, historyTotalPages.value)\r\n    } else {\r\n      start = Math.max(end - range * 2, 1)\r\n    }\r\n  }\r\n\r\n  return Array.from({ length: end - start + 1 }, (_, i) => start + i)\r\n})\r\n\r\nconst prevHistoryPage = () => {\r\n  if (historyCurrentPage.value > 1) {\r\n    historyCurrentPage.value--\r\n  }\r\n}\r\n\r\nconst nextHistoryPage = () => {\r\n  if (historyCurrentPage.value < historyTotalPages.value) {\r\n    historyCurrentPage.value++\r\n  }\r\n}\r\n\r\nconst goToHistoryPage = (page) => {\r\n  historyCurrentPage.value = page\r\n}\r\n\r\n// SweetAlert functions\r\nconst showSuccessAlert = (title, message) => {\r\n  Swal.fire({\r\n    icon: 'success',\r\n    title: title,\r\n    text: message,\r\n    confirmButtonColor: '#3085d6',\r\n  })\r\n}\r\n\r\nconst showErrorAlert = (title, message) => {\r\n  Swal.fire({\r\n    icon: 'error',\r\n    title: title,\r\n    text: message,\r\n    confirmButtonColor: '#d33',\r\n  })\r\n}\r\n\r\n</script>\r\n\r\n<style scoped>\r\n.btn-primary {\r\n  @apply bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded transition duration-300 ease-in-out flex items-center justify-center;\r\n}\r\n\r\n.btn-secondary {\r\n  @apply bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded transition duration-300 ease-in-out flex items-center justify-center;\r\n}\r\n\r\n.max-h-96 {\r\n  max-height: 24rem;\r\n}\r\n\r\n/* Custom scrollbar styles */\r\n.max-h-96::-webkit-scrollbar {\r\n  width: 8px;\r\n}\r\n\r\n.max-h-96::-webkit-scrollbar-track {\r\n  background: #f1f1f1;\r\n  border-radius: 4px;\r\n}\r\n\r\n.max-h-96::-webkit-scrollbar-thumb {\r\n  background: #888;\r\n  border-radius: 4px;\r\n}\r\n\r\n.max-h-96::-webkit-scrollbar-thumb:hover {\r\n  background: #555;\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}