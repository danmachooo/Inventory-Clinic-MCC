{"ast":null,"code":"import \"core-js/modules/es.function.name.js\";\nimport { createElementVNode as _createElementVNode, createVNode as _createVNode, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass } from \"vue\";\nvar _hoisted_1 = {\n  \"class\": \"bg-gray-100 min-h-screen\"\n};\nvar _hoisted_2 = {\n  \"class\": \"container mx-auto px-4 py-8\"\n};\nvar _hoisted_3 = {\n  \"class\": \"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8\"\n};\nvar _hoisted_4 = {\n  \"class\": \"grid grid-cols-1 lg:grid-cols-2 gap-8\"\n};\nvar _hoisted_5 = {\n  \"class\": \"bg-white shadow-lg rounded-lg overflow-hidden\"\n};\nvar _hoisted_6 = {\n  \"class\": \"p-6\"\n};\nvar _hoisted_7 = {\n  \"class\": \"overflow-x-auto\"\n};\nvar _hoisted_8 = {\n  \"class\": \"w-full\"\n};\nvar _hoisted_9 = {\n  \"class\": \"divide-y divide-gray-200\"\n};\nvar _hoisted_10 = {\n  \"class\": \"py-4 pr-6 whitespace-nowrap\"\n};\nvar _hoisted_11 = {\n  \"class\": \"py-4 pr-6 whitespace-nowrap\"\n};\nvar _hoisted_12 = {\n  \"class\": \"py-4 pr-6 whitespace-nowrap\"\n};\nvar _hoisted_13 = {\n  \"class\": \"py-4 whitespace-nowrap\"\n};\nvar _hoisted_14 = {\n  \"class\": \"bg-white shadow-lg rounded-lg overflow-hidden\"\n};\nvar _hoisted_15 = {\n  \"class\": \"p-6\"\n};\nvar _hoisted_16 = {\n  \"class\": \"space-y-4\"\n};\nvar _hoisted_17 = {\n  \"class\": \"font-semibold text-gray-800\"\n};\nvar _hoisted_18 = {\n  \"class\": \"text-gray-600 mt-1\"\n};\nvar _hoisted_19 = {\n  \"class\": \"text-xs text-gray-500 mt-2\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_cache[3] || (_cache[3] = _createElementVNode(\"h1\", {\n    \"class\": \"text-3xl font-bold text-gray-800 mb-8\"\n  }, \"Dashboard\", -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_3, [_createVNode($setup[\"DashboardCard\"], {\n    title: \"Total Items\",\n    value: $setup.totalItems,\n    icon: \"Package\",\n    color: \"bg-blue-500\"\n  }, null, 8 /* PROPS */, [\"value\"]), _createVNode($setup[\"DashboardCard\"], {\n    title: \"Low Stock Alerts\",\n    value: $setup.lowStockCount,\n    icon: \"AlertTriangle\",\n    color: \"bg-yellow-500\"\n  }, null, 8 /* PROPS */, [\"value\"]), _createVNode($setup[\"DashboardCard\"], {\n    title: \"Expiring Soon\",\n    value: $setup.expiringCount,\n    icon: \"Clock\",\n    color: \"bg-red-500\"\n  }, null, 8 /* PROPS */, [\"value\"])]), _createElementVNode(\"div\", _hoisted_4, [_createCommentVNode(\" Recent Transactions \"), _createElementVNode(\"div\", _hoisted_5, [_cache[1] || (_cache[1] = _createElementVNode(\"div\", {\n    \"class\": \"px-6 py-4 bg-gray-50 border-b border-gray-200\"\n  }, [_createElementVNode(\"h2\", {\n    \"class\": \"text-xl font-semibold text-gray-800\"\n  }, \"Recent Transactions\")], -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"table\", _hoisted_8, [_cache[0] || (_cache[0] = _createElementVNode(\"thead\", null, [_createElementVNode(\"tr\", {\n    \"class\": \"text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\"\n  }, [_createElementVNode(\"th\", {\n    \"class\": \"pb-3 pr-6\"\n  }, \"Item\"), _createElementVNode(\"th\", {\n    \"class\": \"pb-3 pr-6\"\n  }, \"Action\"), _createElementVNode(\"th\", {\n    \"class\": \"pb-3 pr-6\"\n  }, \"Quantity\"), _createElementVNode(\"th\", {\n    \"class\": \"pb-3\"\n  }, \"Date\")])], -1 /* HOISTED */)), _createElementVNode(\"tbody\", _hoisted_9, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.recentTransactions, function (transaction) {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: transaction.id,\n      \"class\": \"text-sm\"\n    }, [_createElementVNode(\"td\", _hoisted_10, _toDisplayString(transaction.InventoryItem.name), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_11, [_createElementVNode(\"span\", {\n      \"class\": _normalizeClass($setup.getTransactionTypeClass(transaction.transaction_type))\n    }, _toDisplayString(transaction.transaction_type), 3 /* TEXT, CLASS */)]), _createElementVNode(\"td\", _hoisted_12, _toDisplayString(transaction.quantity_change), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_13, _toDisplayString($setup.formatDate(transaction.date)), 1 /* TEXT */)]);\n  }), 128 /* KEYED_FRAGMENT */))])])])])]), _createCommentVNode(\" Notifications \"), _createElementVNode(\"div\", _hoisted_14, [_cache[2] || (_cache[2] = _createElementVNode(\"div\", {\n    \"class\": \"px-6 py-4 bg-gray-50 border-b border-gray-200\"\n  }, [_createElementVNode(\"h2\", {\n    \"class\": \"text-xl font-semibold text-gray-800\"\n  }, \"Notifications\")], -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_15, [_createElementVNode(\"div\", _hoisted_16, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.notifications, function (notification) {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: notification.id,\n      \"class\": _normalizeClass([\"p-4 rounded-lg\", $setup.getNotificationClass(notification.notification_type)])\n    }, [_createElementVNode(\"h3\", _hoisted_17, _toDisplayString($setup.getNotificationTitle(notification)), 1 /* TEXT */), _createElementVNode(\"p\", _hoisted_18, _toDisplayString(notification.message), 1 /* TEXT */), _createElementVNode(\"p\", _hoisted_19, _toDisplayString($setup.formatDate(notification.created_at)), 1 /* TEXT */)], 2 /* CLASS */);\n  }), 128 /* KEYED_FRAGMENT */))])])])])])]);\n}","map":{"version":3,"names":["_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_createVNode","$setup","title","value","totalItems","icon","color","lowStockCount","expiringCount","_hoisted_4","_createCommentVNode","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_Fragment","_renderList","recentTransactions","transaction","key","id","_hoisted_10","_toDisplayString","InventoryItem","name","_hoisted_11","_normalizeClass","getTransactionTypeClass","transaction_type","_hoisted_12","quantity_change","_hoisted_13","formatDate","date","_hoisted_14","_hoisted_15","_hoisted_16","notifications","notification","getNotificationClass","notification_type","_hoisted_17","getNotificationTitle","_hoisted_18","message","_hoisted_19","created_at"],"sources":["C:\\Users\\Lenovo Pc\\OneDrive - Department of Education\\Desktop\\MCDL-MINSU-CLINIC\\Inventory-Clinic-MCC\\frontend\\src\\views\\Dashboard.vue"],"sourcesContent":["<template>\r\n  <div class=\"bg-gray-100 min-h-screen\">\r\n    <div class=\"container mx-auto px-4 py-8\">\r\n      <h1 class=\"text-3xl font-bold text-gray-800 mb-8\">Dashboard</h1>\r\n      \r\n      <div class=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8\">\r\n        <DashboardCard title=\"Total Items\" :value=\"totalItems\" icon=\"Package\" color=\"bg-blue-500\" />\r\n        <DashboardCard title=\"Low Stock Alerts\" :value=\"lowStockCount\" icon=\"AlertTriangle\" color=\"bg-yellow-500\" />\r\n        <DashboardCard title=\"Expiring Soon\" :value=\"expiringCount\" icon=\"Clock\" color=\"bg-red-500\" />\r\n      </div>\r\n\r\n      <div class=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\r\n        <!-- Recent Transactions -->\r\n        <div class=\"bg-white shadow-lg rounded-lg overflow-hidden\">\r\n          <div class=\"px-6 py-4 bg-gray-50 border-b border-gray-200\">\r\n            <h2 class=\"text-xl font-semibold text-gray-800\">Recent Transactions</h2>\r\n          </div>\r\n          <div class=\"p-6\">\r\n            <div class=\"overflow-x-auto\">\r\n              <table class=\"w-full\">\r\n                <thead>\r\n                  <tr class=\"text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\">\r\n                    <th class=\"pb-3 pr-6\">Item</th>\r\n                    <th class=\"pb-3 pr-6\">Action</th>\r\n                    <th class=\"pb-3 pr-6\">Quantity</th>\r\n                    <th class=\"pb-3\">Date</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody class=\"divide-y divide-gray-200\">\r\n                  <tr v-for=\"transaction in recentTransactions\" :key=\"transaction.id\" class=\"text-sm\">\r\n                    <td class=\"py-4 pr-6 whitespace-nowrap\">{{ transaction.InventoryItem.name }}</td>\r\n                    <td class=\"py-4 pr-6 whitespace-nowrap\">\r\n                      <span :class=\"getTransactionTypeClass(transaction.transaction_type)\">\r\n                        {{ transaction.transaction_type }}\r\n                      </span>\r\n                    </td>\r\n                    <td class=\"py-4 pr-6 whitespace-nowrap\">{{ transaction.quantity_change }}</td>\r\n                    <td class=\"py-4 whitespace-nowrap\">{{ formatDate(transaction.date) }}</td>\r\n                  </tr>\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Notifications -->\r\n        <div class=\"bg-white shadow-lg rounded-lg overflow-hidden\">\r\n          <div class=\"px-6 py-4 bg-gray-50 border-b border-gray-200\">\r\n            <h2 class=\"text-xl font-semibold text-gray-800\">Notifications</h2>\r\n          </div>\r\n          <div class=\"p-6\">\r\n            <div class=\"space-y-4\">\r\n              <div v-for=\"notification in notifications\" :key=\"notification.id\" \r\n                   class=\"p-4 rounded-lg\"\r\n                   :class=\"getNotificationClass(notification.notification_type)\">\r\n                <h3 class=\"font-semibold text-gray-800\">\r\n                  {{ getNotificationTitle(notification) }}\r\n                </h3>\r\n                <p class=\"text-gray-600 mt-1\">\r\n                  {{ notification.message }}\r\n                </p>\r\n                <p class=\"text-xs text-gray-500 mt-2\">\r\n                  {{ formatDate(notification.created_at) }}\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, onUnmounted } from 'vue'\r\nimport axios from 'axios'\r\nimport DashboardCard from '../components/DashboardCard.vue'\r\n\r\nconst totalItems = ref(0)\r\nconst lowStockCount = ref(0)\r\nconst expiringCount = ref(0)\r\nconst recentTransactions = ref([])\r\nconst notifications = ref([])\r\nconst API_URL = 'http://localhost:5000/api/inventory'\r\nconst pollingInterval = ref(5000) \r\nlet pollingTimer = null\r\n\r\nconst fetchDashboardData = async () => {\r\n  try {\r\n    const [itemsResponse, lowStockResponse, expiringResponse, transactionsResponse, notificationsResponse] = await Promise.all([\r\n      axios.get(`${API_URL}/items`),\r\n      axios.get(`${API_URL}/low-stock`),\r\n      axios.get(`${API_URL}/expiring-batches`),\r\n      axios.get(`${API_URL}/transactions`),\r\n      axios.get(`${API_URL}/notifications`)\r\n    ])\r\n\r\n    totalItems.value = itemsResponse.data.data.length\r\n    lowStockCount.value = lowStockResponse.data.data.length\r\n    expiringCount.value = expiringResponse.data.data.length\r\n    recentTransactions.value = transactionsResponse.data.data.slice(0, 5)\r\n    notifications.value = notificationsResponse.data.data.slice(0, 5)\r\n  } catch (error) {\r\n    console.error('Error fetching dashboard data:', error)\r\n  }\r\n}\r\n\r\nconst startPolling = () => {\r\n  fetchDashboardData()\r\n  pollingTimer = setInterval(fetchDashboardData, pollingInterval.value)\r\n}\r\n\r\nconst stopPolling = () => {\r\n  if (pollingTimer) {\r\n    clearInterval(pollingTimer)\r\n  }\r\n}\r\n\r\nconst formatDate = (dateString) => {\r\n  return new Date(dateString).toLocaleDateString('en-US', {\r\n    year: 'numeric',\r\n    month: 'short',\r\n    day: 'numeric'\r\n  })\r\n}\r\n\r\nconst getNotificationClass = (type) => {\r\n  const classes = {\r\n    'LOW_STOCK': 'bg-yellow-100',\r\n    'EXPIRED': 'bg-red-100',\r\n    'SOON_EXPIRING': 'bg-blue-100',\r\n    'REORDER': 'bg-green-100'\r\n  }\r\n  return classes[type] || 'bg-gray-100'\r\n}\r\n\r\nconst getNotificationTitle = (notification) => {\r\n  const titles = {\r\n    'LOW_STOCK': 'Low Stock Alert',\r\n    'EXPIRED': 'Batch Expired',\r\n    'SOON_EXPIRING': 'Batch Expiring Soon',\r\n    'REORDER': 'Reorder Required'\r\n  }\r\n  return titles[notification.notification_type] || 'Notification'\r\n}\r\n\r\nconst getTransactionTypeClass = (type) => {\r\n  const classes = {\r\n    'IN': 'text-green-600 bg-green-100 px-2 py-1 rounded-full',\r\n    'OUT': 'text-red-600 bg-red-100 px-2 py-1 rounded-full',\r\n    'ADJUSTMENT': 'text-blue-600 bg-blue-100 px-2 py-1 rounded-full'\r\n  }\r\n  return classes[type] || 'text-gray-600 bg-gray-100 px-2 py-1 rounded-full'\r\n}\r\n\r\nonMounted(() => {\r\n  startPolling()\r\n})\r\n\r\nonUnmounted(() => {\r\n  stopPolling()\r\n})\r\n</script>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}